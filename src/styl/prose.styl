@require 'common'

.prose
	max-width 512px
	margin 0 auto
	font-size 107%
	line-height 180%
	@media (min-width 1024px)
		font-size 150%

	h1, h2, h3, h4, h5, h6, p, ul, ol
		margin 32pt 0

	h1
		font-heading-section()
		font-size 180%
		text-align center
		text-transform uppercase
		letter-spacing -0.04em

	h2
		font-heading1()

	h3
		font-heading2()

	h4
		font-heading1()
		font-size 110%

	h5
		font-heading2()
		font-size 110%

	h6
		font-heading1()
		font-size 100%
		
	ol
		list-style none
		counter-reset ol-counter
		li
			position relative
			padding-left 1.5em
			counter-increment ol-counter
			&::before
				content counter(ol-counter) '.'
				position absolute
				right calc(100% - 1.5em)
				min-width 1.5em
				height 100%
				font-weight bold
				opacity 0.6

	ul
		list-style none
		li
			position relative
			padding-left 1em
			&::before
				content '•'
				position absolute
				left 0
				width 1em
				height 100%
				font-weight bold
				opacity 0.6

	li + li
		margin-top 0.5em

	small
		font-size 60%
		line-height 180%
		&.small-block
			display inline-block

	sup
		vertical-align super
		font-size 60%

	sub
		vertical-align sub
		font-size 60%

	code
		font-family 'Source Code Pro', monospace
	
	pre > code
		display block
		padding 0 0.5em
		overflow-x auto
		background color-bg2
	
	blockquote
		position relative
		font-size 80%
		font-style italic
		padding-left 1em
		&::before
			content ''
			position absolute
			left 0
			top 0.5em
			bottom 0.5em
			border-left solid 4px color-bg2

	// :(
	.image
	> img
	> video
	> p > img
	> p > video
	> span > img
	> span > video
	> p > span > img
	> p > span > video
			&:not(.media-plain)
				display block
				width 100%
				height auto
				max-height 80vh
				object-fit contain

	hr
		margin 64pt 0
		border solid 1px color-bg2
		box-shadow -(@max-width / 2) 0 color-bg2, (@max-width / 2) 0 color-bg2

	.bleed
		display block
		max-height 80vh
		> img, > video, > div
			position relative
			left 50%
			width 96vw !important // sad, overrides the monster rule above
			transform translateX(-50%)

	.center
		display flex
		align-items center
		justify-content center
		& > *
			flex 0 1 auto

	.caption
		margin 1em 0
		display block
		color rgba(color-fg, 0.5)
		font-size 60%
		line-height normal
		font-weight bold
		text-align center

	a.anchor-em
		font-size 90%
		&::after
			content ' ▸'

	.d3d > *
		perspective-std()
		transform-style preserve-3d
		* 
			transform-style inherit
