<div :class="'blog-list ' + attrs.class">
  <script render>
    for (const item of index){
      const tags = item.tags.map(tag => `<tag>${tag}</tag>`).join(" ");
      yield html`<blog-list-item href="${item.href}" date="${item.date}">${item.title} ${tags}</blog-list-item>`;
    }
  </script>
</div>

<script static>
  const generatedIndex = require("./index.generated.json");
  const staticIndex = require("./index.static.json");

  const { filterTag, limit = Infinity } = attrs;

  let index = generatedIndex
    .concat(staticIndex)
    .filter((item) => !filterTag || item.tags.includes(filterTag));
  index = index.slice(0, limit);
  index.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
</script>

<style>
  .blog-list {
    margin: auto;
    max-width: 800px;
  }
</style>
