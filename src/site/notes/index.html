<html lang="en">
  <page-title title="Notes" />
  <page path-group="/notes/" header-icon-src="/icons/glasses.png">
    <content-header
      title="Notes / Blog"
      subtitle="An index of notes, links, stories, anything really."
    />
    <card-carousel class="notes-carousel">
      <blog-post-card
        href="/notes/sweep-and-prune/"
        title="Sweep and prune"
        posttitle="Collision detection algorithm"
        description="Algorithm explainer with live demos"
      />
      <blog-post-card
        href="/notes/dynamic-patrol-stealth-games/"
        title="Patrol behaviour w/ Markov chains"
        posttitle="Stealth game AI algorithm"
        description="Algorithm explainer with playable demos"
      />
    </card-carousel>
    <!-- <h2 class="section-title">Interactives</h2>
    <card-carousel class="notes-carousel">
      <card-grid-item
        href="${item.href}"
        title="${item.title}"
        posttitle="${item.posttitle}"
        media-src="/favicon.png"
        thumbalign="center"
        expanded="true"
      >
        $tags
      </card-grid-item>
    </card-carousel> -->
    <h2 class="section-title">All notes</h2>
    <blog-list
      class="notes-list"
      year-headings="true"
      animated="true"
      with-private="true"
    />
  </page>
</html>

<style>
  .section-title {
    margin: 60px 0 18px;
    font-family: var(--display-font);
    font-size: 21px;
    font-style: italic;
    font-weight: bold;
    text-align: center;
  }

  .notes-carousel {
    /* virtual max width 1152px */
    padding-inline: calc(max(30px, 50svw - 576px));
  }

  .notes-list {
    margin-bottom: 60px;
  }
</style>

<script client defer>
  (() => {
    const seenKey = "seenNotesListAnimation";
    const seenTimes = Number.parseInt(sessionStorage.getItem(seenKey) || 0);

    const shouldAnimate = seenTimes < 2 && window.scrollY < 50;
    const projectGrid = document.querySelector(".blog-list");
    projectGrid.classList.toggle("blog-list-animated", shouldAnimate);

    if (shouldAnimate) {
      sessionStorage.setItem(seenKey, seenTimes + 1);
    }
  })();
</script>
