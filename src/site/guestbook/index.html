<html lang="en">
  <page-title title="Guestbook" />
  <script render>
    // prettier-ignore
    return html`<head><${"script"}>window.GUESTBOOK_API="${GUESTBOOK_API}"</${"script"}></head>`;
  </script>
  <page>
    <content-header title="Guestbook" />

    <p class="intro">
      Thanks for visiting the site. Write and customise your message below!
    </p>

    <form class="form" method="post" :action="GUESTBOOK_API">
      <input name="schemaVersion" type="hidden" :value="SCHEMA_VERSION" />
      <div class="message-box">
        <textarea class="message-text" name="text" placeholder="Your message"></textarea>
        <input class="message-name" name="name" type="text" placeholder="Your name" />
      </div>
      <button type="submit">Send</button>
    </form>
  </page>
</html>

<style>
  .intro {
    margin: 18px auto;
    max-width: 384px;
  }
  .form {
    margin: 18px auto;
    max-width: 384px;
  }
  .message-box {
    display: flex;
    flex-direction: column;
    background: red;
    min-width: 384px;
    min-height: 192px;
    box-sizing: border-box;
  }
  .message-text {
    flex: 1 1 auto;
    resize: none;
  }
  .message-name {
    flex: 0 1 auto;
  }
</style>

<script static>
  const prod = process.env.NODE_ENV === "production";
  const GUESTBOOK_API =
    process.env.GUESTBOOK_API ??
    (prod ? "https://guestbook.leanrada.com/" : "http://127.0.0.1:8787/");
  const SCHEMA_VERSION = "v2";
</script>

<script client defer>
  (() => {
    console.log("Hello guests");
  })();
</script>
