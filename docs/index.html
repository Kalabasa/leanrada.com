<html lang="en">
<head>
    <title>leanrada.com</title>
    <script defer="" async="" src="https://unpkg.com/perlin-noise-3d@0.5.4/dist/perlin-noise-3d.min.js"></script>
    <style>
        .card-grid>*:nth-child(1) {
            --card-grid-item-delay: 0s;
        }

        .card-grid>*:nth-child(2) {
            --card-grid-item-delay: 0.3s;
        }

        .card-grid>*:nth-child(3) {
            --card-grid-item-delay: 0.6s;
        }

        .card-grid>*:nth-child(4) {
            --card-grid-item-delay: 0.8999999999999999s;
        }

        .card-grid>*:nth-child(5) {
            --card-grid-item-delay: 1.1066638362341807s;
        }

        .card-grid>*:nth-child(6) {
            --card-grid-item-delay: 1.1613603032723672s;
        }

        .card-grid>*:nth-child(7) {
            --card-grid-item-delay: 1.207605507220545s;
        }

        .card-grid>*:nth-child(8) {
            --card-grid-item-delay: 1.2476649250079015s;
        }

        .card-grid>*:nth-child(9) {
            --card-grid-item-delay: 1.2829998357048165s;
        }

        .card-grid>*:nth-child(10) {
            --card-grid-item-delay: 1.3146079904021644s;
        }

        .card-grid>*:nth-child(11) {
            --card-grid-item-delay: 1.343201044343462s;
        }
    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/favicon.png">
    <script async="" src="https://cdn.jsdelivr.net/gh/Kalabasa/analytics/analytics.js"></script>
    <style>
        .intro-line:nth-of-type(1) {
            animation-delay: 0.23862943611198906s;
        }

        .intro-line:nth-of-type(2) {
            animation-delay: 0.37725887222397814s;
        }

        .intro-line:nth-of-type(3) {
            animation-delay: 0.45835189384561104s;
        }

        .intro-line:nth-of-type(4) {
            animation-delay: 0.5158883083359672s;
        }

        .intro-line:nth-of-type(5) {
            animation-delay: 0.5605170185988092s;
        }

        .intro-line:nth-of-type(6) {
            animation-delay: 0.5969813299576001s;
        }

        .intro-line:nth-of-type(7) {
            animation-delay: 0.6278114659230517s;
        }
    </style>
    <style>
        @font-face {
            font-family: "Space Mono";
            src: url("/fonts/SpaceMono-Regular.ttf") format("truetype");
        }

        @font-face {
            font-family: "Space Mono";
            font-style: italic;
            src: url("/fonts/SpaceMono-Italic.ttf") format("truetype");
        }

        @font-face {
            font-family: "Miriam Libre";
            src: url("/fonts/MiriamLibre-Regular.ttf") format("truetype");
        }

        @font-face {
            font-family: "Miriam Libre";
            font-weight: bold;
            src: url("/fonts/MiriamLibre-Bold.ttf") format("truetype");
        }

        :root {
            --default-font: "Space Mono", monaco, Consolas, Lucida Console, monospace;
            --reading-font: "Miriam Libre", Futura, "Trebuchet MS", Arial, sans-serif;

            --bg-clr: #111;
            --card-clr: #222;
            --clr0-light: #54f8c1;
            --clr0: #0ad591;
            --clr0-dark: #018b5d;
            --clr1: #df2063;

            --text-clr: #fff;
            --text2-clr: #999;

            --ease: cubic-bezier(0.8, 0, 1, 1);
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: var(--default-font, monospace);
            background-color: var(--bg-clr, #111);
            color: var(--text-clr, #fff);
            overflow-x: hidden;
        }

        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100%;
        }

        .page-wrapper-content {
            flex: 1 1 auto;
        }
    </style>
    <style>
        .home-link {
            text-decoration: none;
        }

        .home-link-icon {
            width: 48px;
            height: 48px;
            image-rendering: pixelated;
        }

        .home-link-icon:hover {
            filter: invert(1);
        }
    </style>
    <style>
        .main-footer {
            position: relative;
            display: flex;
            justify-content: space-between;
            gap: 60px;
            padding: 60px calc(max(60px, 50vw - 600px)) 60px;
            font-size: 18px;
            font-weight: bold;
            background: var(--clr0);
            color: #000;
            overflow: hidden;
            content-visibility: auto;
            contain-intrinsic-height: 220x;
        }

        .main-footer-links-heading {
            margin: 0 0 18px;
            font-size: inherit;
        }

        .main-footer-line {
            margin: 0 0 18px;
        }

        .main-footer-nav {
            color: #000;
        }

        .main-footer-nav:hover {
            color: #fff;
        }

        .main-footer-content-part {
            z-index: 1;
        }

        .main-footer-nebula {
            position: absolute;
            left: -30%;
            top: -30%;
            width: 160%;
            height: 160%;
            z-index: 0;
        }

        .main-footer-top-btn {
            z-index: 2;
            position: absolute;
            right: 0;
            top: 0;
            width: 72px;
            height: 36px;
            padding-right: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-bottom-left-radius: 18px;
            background: var(--bg-clr);
            color: var(--clr0-light);
            font: inherit;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .main-footer-top-btn:hover {
            color: var(--clr1);
        }

        .main-footer-top-btn::before {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            width: 36px;
            height: 18px;
            border-top-right-radius: 18px;
            transform: translateX(-72px);
            box-shadow: 18px 0 0 var(--bg-clr);
        }

        @media (max-width: 700px) {
            .main-footer {
                flex-direction: column-reverse;
            }
        }
    </style>
    <style>
        .gallery-grid {
            display: grid;
            justify-content: center;
            margin: auto;
            max-width: 900px;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        @media (max-width: 900px) {
            .gallery-grid {
                gap: 12px;
            }
        }

        @media (max-width: 600px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
    <style>
        .gallery-grid-item-block {
            position: relative;
            width: 100%;
            /* aspect ratio trick*/
            padding-bottom: 100%;
        }

        .gallery-grid-item {
            position: absolute;
            display: block;
            width: 100%;
            height: 100%;
            border-radius: 18px;
            text-decoration: none;
            color: #fff;
            overflow: hidden;
        }

        .gallery-grid-media {
            position: absolute;
            /* yep overkill but it doesnt work without em */
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }

        .gallery-grid-item.selected .gallery-grid-media,
        .gallery-grid-item:focus-visible .gallery-grid-media,
        .gallery-grid-item:hover .gallery-grid-media {
            filter: invert(1) contrast(0.6);
        }

        .gallery-grid-label {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            padding: 18px;
            font-size: 18px;
            font-style: italic;
            font-weight: bold;
            line-height: 1.6;
            text-align: center;
            visibility: hidden;
            z-index: 0;
        }

        .gallery-grid-label::before {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            background: var(--clr0-dark);
            opacity: 0.7;
            z-index: -1;
        }

        .gallery-grid-item.selected .gallery-grid-label,
        .gallery-grid-item:focus-visible .gallery-grid-label,
        .gallery-grid-item:hover .gallery-grid-label {
            visibility: visible;
        }

        .gallery-grid-item.selected .gallery-grid-label::after {
            content: "↗";
            position: absolute;
            right: 18px;
            top: 18px;
            width: 18px;
            height: 18px;
            font-size: 24px;
            line-height: 16px;
            font-style: normal;
            font-weight: bold;
            background: #fff;
            color: var(--clr0-dark);
        }

        @media (max-width: 800px) {
            .gallery-grid-label {
                font-size: 15px;
            }
        }
    </style>
    <style>
        .card-grid {
            display: grid;
            justify-content: center;
            grid-template-columns: repeat(auto-fit, calc(min(546px, 100%)));
            gap: 60px;
        }

        .card-grid-tall {
            gap: 90px 60px;
        }

        @media (max-width: 900px) {
            .card-grid {
                gap: 30px;
            }
        }

        @media (prefers-reduced-motion) {
            .card-grid * {
                animation: none !important;
            }
        }
    </style>
    <style>
        .card-grid-item {
            display: block;
            text-decoration: none;
            text-align: start;
            color: var(--text-clr);
            overflow: hidden;
            transition: 0.2s var(--ease);
            transition-property: margin, padding;
        }

        .card-grid-animated .card-grid-item {
            animation: card-grid-item-reveal 0.8s var(--ease) backwards;
            animation-delay: var(--card-grid-item-delay);
        }

        @keyframes card-grid-item-reveal {
            0% {
                clip-path: inset(20% 100% 60% 0 round 18px);
                filter: brightness(0);
            }

            50% {
                clip-path: inset(20% 0 60% 0 round 18px);
                filter: brightness(1);
            }

            100% {
                clip-path: inset(0 0 0 0 round 18px);
            }
        }

        .card-grid-image-container {
            position: relative;
            width: 100%;
            height: 340px;
            border-radius: 18px;
            overflow: hidden;
            z-index: 0;
        }

        .card-grid-image-container::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            background: var(--clr0);
            mix-blend-mode: darken;
            transition: background 1s;
        }

        .card-grid-image {
            width: 101%;
            height: 101%;
            object-fit: cover;
            object-position: top;
            filter: contrast(0.8);
            transform: scale(1);
            transform-origin: 9px 9px;
            transition: filter 1s, transform 1s;
        }

        .card-grid-thumbalign-center .card-grid-image {
            object-position: center;
            transform-origin: center;
        }

        .card-grid-title-wrap {
            position: relative;
            height: 0;
        }

        .card-grid-title-bar {
            position: absolute;
            bottom: 0;
            border-top-right-radius: 18px;
            background: var(--bg-clr);
        }

        .card-grid-title-content {
            position: relative;
            padding: 12px 24px 0 0;
            transition: padding 0.2s var(--ease);
        }

        .card-grid-title-content::before {
            content: "";
            position: absolute;
            left: 0;
            bottom: 100%;
            width: 18px;
            height: 36px;
            border-bottom-left-radius: 18px;
            box-shadow: 0 18px 0 var(--bg-clr);
        }

        .card-grid-title-content::after {
            content: "";
            position: absolute;
            left: 100%;
            bottom: 0;
            width: 36px;
            height: 18px;
            border-bottom-left-radius: 18px;
            box-shadow: -18px 0 0 var(--bg-clr);
        }

        .card-grid-title {
            font-size: 21px;
            font-style: italic;
            font-weight: bold;
        }

        .card-grid-posttitle {
            margin-top: 12px;
            font-size: 15px;
            font-style: italic;
            font-weight: bold;
            opacity: 0.8;
        }

        .card-grid-postitle-small {
            display: none;
        }

        .card-grid-actions {
            display: none;
            gap: 5mm;
            max-height: 48px;
            padding-top: 12px;
            overflow: hidden;
        }

        .card-grid-action {
            display: inline-block;
            font-weight: bold;
            text-decoration: underline;
            color: var(--text2-clr);
            cursor: pointer;
            position: relative;
        }

        .card-grid-info {
            margin: -2.5mm;
            padding: 2.5mm;
        }

        .card-grid-story::after {
            content: "→";
            display: inline-block;
        }

        .card-grid-content {
            margin: 30px 0;
            font-size: 15px;
            line-height: 2;
            transition: margin 0.2s var(--ease);
        }

        .card-grid-animated .card-grid-title {
            animation: card-grid-text-reveal 0.4s cubic-bezier(0, 0.8, 0.6, 1) backwards;
            animation-delay: calc(var(--card-grid-item-delay) + 0.8s);
        }

        .card-grid-animated .card-grid-posttitle {
            animation: card-grid-text-reveal 0.4s cubic-bezier(0, 0.8, 0.6, 1) backwards;
            animation-delay: calc(var(--card-grid-item-delay) + 0.9s);
        }

        @keyframes card-grid-text-reveal {
            from {
                transform: translateY(-100%);
                clip-path: inset(100% 0 0 0);
            }

            to {
                clip-path: inset(0 0 0 0);
            }
        }

        .card-grid-animated .card-grid-content {
            animation: card-grid-content 0.6s 1.5s backwards;
        }

        @keyframes card-grid-content {
            from {
                opacity: 0;
            }
        }

        @media (hover: hover) {
            .card-grid-item:hover {
                margin: -12px -24px 0;
                padding-bottom: 12px;
            }

            .card-grid-item:hover .card-grid-image-container::after {
                background: var(--text-clr);
                transition: background 2s;
            }

            .card-grid-item:hover .card-grid-image {
                filter: contrast(1);
                transform: scale(1.1);
                transition: filter 1s, transform 2s;
            }

            .card-grid-item:hover .card-grid-title-content {
                padding: 24px;
            }

            .card-grid-item:hover .card-grid-content {
                margin-left: 24px;
                margin-right: 24px;
            }
        }

        @media (max-width: 600px) {
            .card-grid-content {
                margin: 12px 0;
            }

            .card-grid-image-container {
                height: 200px;
            }

            .card-grid-posttitle {
                display: none;
            }

            .card-grid-postitle-small {
                display: block;
            }

            .card-grid-actions {
                display: flex;
            }

            .card-grid-item-expanded .card-grid-actions {
                max-height: 0;
                transition: max-height 0.2s cubic-bezier(0.2, 0, 0.8, 1);
            }

            .card-grid-description {
                max-height: 0;
                overflow: hidden;
            }

            .card-grid-item-expanded .card-grid-description {
                max-height: 100vh;
                transition: max-height 1s cubic-bezier(0.2, 0, 1, 1);
            }
        }
    </style>
    <style>
        magnetic-field-client>canvas {
            width: 100%;
            height: 100%;
        }
    </style>
    <style>
        .text-link {
            color: var(--clr0-light, #fff);
        }

        .text-link:visited {
            color: var(--clr0, #fff);
        }
    </style>
    <style>
        .great-time-counter {
            display: none;
            position: fixed;
            bottom: 0;
            right: 0;
            font-size: 18px;
            background-color: var(--bg-clr);
            pointer-events: none;
            transform-origin: bottom right;
            animation: great-time-counter-appear 0.6s both;
            z-index: 200;
        }

        .great-time-counter.flash {
            background-color: #fff;
        }

        @keyframes great-time-counter-appear {
            from {
                opacity: 0;
                transform: scale(4);
            }
        }
    </style>
    <style>
        .great-time-trigger {
            text-decoration: underline;
            cursor: pointer;
            user-select: none;
        }
    </style>
    <style>
        .home-circle-icon {
            position: absolute;
            left: calc(50% - 2.5vh);
            top: calc(50% - 2.5vh);
            width: 5vh;
            height: 5vh;
            object-fit: cover;
            image-rendering: pixelated;
            filter: invert(1);
        }
    </style>
    <style>
        .curved {
            display: inline-block;
            width: 0;
        }
    </style>
    <style>
        .home-circle-text {
            position: relative;
            margin: 2vh;
            width: 100%;
            height: 100%;
            font-size: 3vh;
            font-style: italic;
            color: #fff;
            animation: home-circle-text-animation 7s cubic-bezier(0.785, 0.135, 0.15, 0.86) infinite;
        }

        @keyframes home-circle-text-animation {
            to {
                transform: rotate(-1turn);
            }
        }
    </style>
    <style>
        nebula-client>canvas {
            width: 100%;
            height: 100%;
        }
    </style>
    <style>
        .main-header {
            position: sticky;
            top: 0;
            width: 100%;
            height: 60px;
            padding: 0 calc(25% - 150px);
            z-index: 100;
            box-sizing: border-box;
            pointer-events: none;
        }

        .main-header.float {
            position: fixed;
        }

        .main-header-bar {
            position: relative;
            display: flex;
            justify-content: space-evenly;
            align-items: flex-end;
            height: 100%;
        }

        .main-header-item {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 6ch;
            height: 36px;
            padding: 0 18px;
            border-radius: 18px;
            font-size: 15px;
            font-weight: bold;
            letter-spacing: 1px;
            text-decoration: none;
            text-transform: uppercase;
            color: #fff;
            backdrop-filter: blur(8px);
            background-image: linear-gradient(60deg, #fff2 60%, transparent 60%);
            background-repeat: no-repeat;
            background-size: 220% 100%;
            background-position: 115%;
            pointer-events: all;
            transition: background-position 0.2s var(--ease);
        }

        .main-header-item:hover {
            background-image: linear-gradient(60deg,
                    #fff2 50%,
                    #fff 50%,
                    #fff 60%,
                    transparent 60%);
            background-position: 0%;
        }

        .main-header-item.select {
            background: #fff2;
        }

        .main-header-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            image-rendering: pixelated;
            object-fit: cover;
            object-position: 0 0;
            filter: invert(1);
            backdrop-filter: blur(8px) invert(1);
            pointer-events: all;
        }

        .main-header-icon:hover {
            object-position: 100% 0;
        }

        @media (max-width: 450px) {
            .main-header-icon {
                display: none;
            }
        }

        .main-header-indicator {
            position: absolute;
            width: 6px;
            height: 6px;
            left: 50%;
            top: calc(100% + 12px);
            transform: translate(-50%, -50%);
            /* border acts as extended touch area */
            border: solid 6mm transparent;
            border-left-width: 45vw;
            border-right-width: 45vw;
            border-radius: 50%;
            background: #fff;
            background-clip: padding-box;
            opacity: 0;
            transition: opacity 50ms;
        }

        .main-header.hidden .main-header-indicator {
            opacity: 0.8;
            pointer-events: all;
        }
    </style>
    <style>
        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            height: clamp(95vh, 600px, 100vh);
        }

        @media (prefers-reduced-motion) {
            .header * {
                animation: none !important;
            }

            .nebula {
                visibility: hidden;
            }
        }

        .header-content {
            white-space: nowrap;
            height: 40vh;
            min-width: 80vh;
            overflow: hidden;
        }

        .header-circle {
            position: relative;
            display: block;
            float: left;
            width: 40vh;
            height: 40vh;
            box-sizing: content-box;
            margin: 0vh 2vh;
            border-radius: 50%;
            background: #bf1852;
            shape-outside: circle(calc(50% + 1vh));
            text-align: initial;
            overflow: hidden;
            animation: header-circle-reveal 0.5s cubic-bezier(1, 0, 0.9, 1),
                fade-background-in 0.2s;
        }

        @keyframes header-circle-reveal {
            from {
                clip-path: circle(2.5vh);
            }

            to {
                clip-path: circle(50%);
            }
        }

        @keyframes fade-background-in {
            from {
                background: transparent;
            }
        }

        .nebula {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }

        .header-circle-text-big {
            width: 36vh;
            height: 36vh;
        }

        .header-circle-text-small {
            display: none;
        }

        .header-icon {
            object-position: 0 0;
        }

        .header-circle:hover .curved {
            color: transparent;
            clip-path: inset(0.8ex -1ch 0);
            animation: header-circle-text-shadow-animation 0.6s cubic-bezier(0, 0, 0.2, 1) forwards;
        }

        @keyframes header-circle-text-shadow-animation {
            0% {
                text-shadow: 0 8vh 0 #fff, 0 4vh 0 #fff, 0 0 0 #fff;
            }

            100% {
                text-shadow: 0 0 0 #fff, 0 -4vh 0 #fff, 0 -8vh 0 #fff;
            }
        }

        .header-circle:hover .header-icon {
            object-position: 20% 0;
        }

        .intro-text {
            line-height: 1.8;
            font-size: 2.2vh;
            font-style: italic;
            animation: intro-text 0.8s 0.4s cubic-bezier(0, 0.7, 0.4, 1) backwards;
        }

        @keyframes intro-text {
            from {
                line-height: 8;
            }
        }

        .intro-line {
            display: inline-block;
            animation: intro-text-drift 0.9s cubic-bezier(0, 0.8, 0.2, 1) both;
        }

        @keyframes intro-text-drift {
            from {
                transform: translate(-1em, 4em);
                text-shadow: 0 3em 0 var(--clr0), 0 6em 0 var(--clr1);
            }

            to {
                transform: translate(0, 0);
                text-shadow: 0 0 0 var(--clr0), 0 0 0 var(--clr1);
            }
        }

        .intro-spacer {
            display: block;
            height: 0px;
            animation: intro-spacer 0.4s 0.4s cubic-bezier(0, 0.8, 0.1, 1) backwards;
        }

        @keyframes intro-spacer {
            from {
                height: 100%;
            }
        }

        .ipa {
            font-size: 85%;
            font-style: normal;
            text-decoration: none;
            color: inherit;
        }

        .ipa-text {
            text-decoration: underline;
        }

        .ipa-icon {
            display: inline-block;
            transform: scale(0.6);
            filter: brightness(8);
        }

        @media (max-aspect-ratio: 4/5) {
            .header {
                height: auto;
                min-height: 95vh;
                margin: 30px 0 60px;
            }

            .header-content {
                height: auto;
                min-width: unset;
                text-align: center;
            }

            .header-circle {
                display: inline-block;
                float: none;
                width: 30vh;
                height: 30vh;
            }

            .header-circle-text-big {
                display: none;
            }

            .header-circle-text-small {
                display: block;
                width: 26vh;
                height: 26vh;
            }

            .intro-text {
                display: block;
                margin-top: 4vh;
                font-size: 18px;
                animation: intro-text-mobile 1s cubic-bezier(0.8, 0.2, 0.2, 0.8);
            }

            .intro-spacer {
                animation: none;
            }
        }

        @keyframes intro-text-mobile {
            from {
                clip-path: inset(0 0 100% 0);
            }

            to {
                clip-path: inset(0 0 0 0);
            }
        }

        .section {
            max-width: 1200px;
            margin: 0 auto max(35vmin, 180px);
            padding: 0 60px;
            font-size: 18px;
            text-align: center;
        }

        .section:last-of-type {
            margin-bottom: 150px;
        }

        .section>p {
            margin: 30px 0;
            line-height: 2;
        }

        .section-title {
            margin: 0 0 36px;
            font-size: 24px;
            font-style: italic;
            font-weight: bold;
        }

        @media (max-width: 800px) {
            .section {
                padding: 0 18px;
            }
        }

        .start-from-top .section {
            animation: section-appear 0.2s 1s backwards;
        }

        @keyframes section-appear {
            from {
                opacity: 0;
            }
        }

        .about-section {
            position: relative;
            max-width: 520px;
        }

        .magnetic-field {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 80vw;
            height: 60%;
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .projects-section {
            overflow: hidden;
        }

        .projects-section .section-title {
            margin-bottom: 60px;
        }

        .more-projects {
            display: inline-block;
            margin-top: 30px;
            font-weight: bold;
        }

        .more-projects::after {
            content: "→";
            display: inline-block;
        }
    </style>
    <script>
        (() => {
            globalThis.BaseElement = createBaseElement(HTMLElement);

            const lifecycleListeners = Symbol("lifecycleListeners");

            function createBaseElement(superClass) {
                return class BaseElement extends superClass {
                    constructor() {
                        super();
                        this[lifecycleListeners] = [];
                    }
                    connectedCallback() {
                        this[lifecycleListeners].forEach((it) => it.connect());
                    }
                    disconnectedCallback() {
                        this[lifecycleListeners].forEach((it) => it.disconnect());
                    }

                    /**
                     * @param factory {() => () => void}
                     */
                    addLifecycleListener(factory) {
                        let cleanup = () => {};
                        const connect = () => (cleanup = factory());
                        const disconnect = () => cleanup();

                        this[lifecycleListeners].push({
                            connect,
                            disconnect
                        });

                        if (this.isConnected) {
                            connect();
                        }
                    }

                    /**
                     * @param selector {string}
                     */
                    asyncQuerySelector(selector) {
                        const obj = {
                            exists: false,
                            element: null,
                        };

                        obj.promise = new Promise((resolve) => {
                            const observer = new MutationObserver(() => {
                                obj.element = this.querySelector(selector);
                                if (obj.element) {
                                    resolve(obj.element);
                                    obj.exists = true;
                                    observer.disconnect();
                                }
                            });

                            this.addLifecycleListener(() => {
                                observer.observe(this, {
                                    childList: true,
                                    subtree: true
                                });
                                return () => observer.disconnect();
                            });
                        });

                        return obj;
                    }

                    /**
                     * @param target {Element}
                     * @param event {string}
                     * @param callback {Function}
                     */
                    aliveListener(target, event, callback) {
                        this.addLifecycleListener(() => {
                            target.addEventListener(event, callback);
                            return () => target.removeEventListener(event, callback);
                        });
                    }

                    /**
                     * @param callbacks {object}
                     * @param callbacks.show {Function}
                     * @param callbacks.hide {Function}
                     */
                    visibilityListener({
                        show,
                        hide
                    }) {
                        let isShowing = false;

                        const observer = new IntersectionObserver((entries) => {
                            for (const entry of entries) {
                                if (entry.target !== this) continue;
                                if (isShowing !== entry.isIntersecting) {
                                    isShowing = entry.isIntersecting;
                                    if (isShowing) {
                                        show();
                                    } else {
                                        hide();
                                    }
                                }
                            }
                        });

                        this.addLifecycleListener(() => {
                            isShowing = isInViewport(this);
                            if (isShowing) show();
                            observer.observe(this);
                            return () => {
                                observer.disconnect();
                                if (isShowing) hide();
                                isShowing = false;
                            };
                        });
                    }
                };
            }

            window.mousePosition = {
                x: 0,
                y: 0
            };
            document.addEventListener(
                "DOMContentLoaded",
                () => {
                    document.body.addEventListener("mousemove", (event) => {
                        window.mousePosition.x = event.clientX;
                        window.mousePosition.y = event.clientY;
                    });
                }, {
                    once: true
                }
            );
        })();

        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
                rect.right > 0 &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.top < window.innerHeight
            );
        }
    </script>
    <script>
        (() => {
            customElements.define(
                "nebula-client",
                class Nebula extends BaseElement {
                    constructor() {
                        super();

                        this.asyncCanvas = this.asyncQuerySelector("canvas");
                        this.context = null;
                        this.noise = null;

                        this.gridWidth = 30;
                        this.gridHeight = 30;
                        this.palette = ["#ffffff"];

                        this.cellWidth = 1; // placeholder
                        this.cellHeight = 1; // placeholder

                        this.useMouse = false;
                        this.mouseCell = null;

                        this.lastT = 0;
                        this.startT = 0;
                        this.loopStartT = 0;

                        this.isVisible = false;
                        this.visibilityListener({
                            show: () => {
                                this.isVisible = true;
                                this.startLoop();
                            },
                            hide: () => (this.isVisible = false),
                        });
                    }

                    connectedCallback() {
                        super.connectedCallback();

                        this.useMouse = this.getAttribute("mouse") != null;

                        const gridWidth = this.getAttribute("width");
                        if (gridWidth) {
                            this.gridWidth = Number.parseInt(gridWidth);
                        }

                        const gridHeight = this.getAttribute("height");
                        if (gridHeight) {
                            this.gridHeight = Number.parseInt(gridHeight);
                        }

                        const paletteAttr = this.getAttribute("palette");
                        if (paletteAttr) {
                            this.palette = paletteAttr.split(" ");
                        }
                    }

                    startLoop() {
                        this.loopStartT = this.lastT = this.getT();
                        this.loop();
                    }

                    async loop() {
                        if (!this.isVisible) {
                            return;
                        }

                        if (typeof perlinNoise3d === "undefined") {
                            setTimeout(() => this.loop(), 200);
                            return;
                        } else if (!this.noise) {
                            this.noise = initNoise();
                            this.startT = this.getT();
                        }

                        const canvas =
                            this.asyncCanvas.value ?? (await this.asyncCanvas.promise);

                        // initialize
                        if (!this.context) {
                            this.cellWidth = Math.ceil(canvas.offsetWidth / this.gridWidth);
                            this.cellHeight = Math.ceil(canvas.offsetHeight / this.gridHeight);
                            canvas.width = this.gridWidth;
                            canvas.height = this.gridHeight;
                            canvas.style.filter += ` blur(${
              Math.min(this.cellWidth, this.cellHeight) * 1.25
            }px)`;
                            this.context = canvas.getContext("2d");
                        }

                        this.draw(canvas, this.context);

                        requestAnimationFrame(() => this.loop());
                    }

                    /**
                     * @param canvas {HTMLCanvasElement}
                     * @param context {CanvasRenderingContext2D}
                     */
                    draw(canvas, context) {
                        const t = this.getT();
                        if (t <= this.lastT) return;

                        const alpha = 1 - Math.pow(1 - 0.016, t - this.lastT);
                        this.lastT = t;

                        const {
                            noise,
                            gridWidth,
                            gridHeight,
                            palette,
                            cellWidth,
                            cellHeight,
                        } = this;
                        const halfGridWidth = gridWidth / 2;
                        const halfGridHeight = gridHeight / 2;

                        this.mouseCell = null;
                        // mousePosition from lib/common
                        if (this.useMouse && window.mousePosition) {
                            const {
                                x,
                                y
                            } = window.mousePosition;
                            const bounds = canvas.getBoundingClientRect();
                            if (
                                bounds.left < x &&
                                x < bounds.right &&
                                bounds.top < y &&
                                y < bounds.bottom
                            ) {
                                this.mouseCell = {
                                    x: (x - bounds.x) / cellWidth,
                                    y: (y - bounds.y) / cellHeight,
                                };
                            }
                        }

                        const paletteLength = palette.length;
                        const xScale = 0.14 + Math.sin(t * 0.03) * 0.06;
                        const yScale = 0.14 + Math.cos(t * 0.05) * 0.06;

                        for (let i = 0; i < gridWidth; i++) {
                            for (let j = 0; j < gridHeight; j++) {
                                const mouseProximity =
                                    this.mouseCell == null ?
                                    0 :
                                    1 -
                                    sigmoid(
                                        Math.hypot(i - this.mouseCell.x, j - this.mouseCell.y) - 3
                                    );

                                const xy = [
                                    1000 + (i - halfGridWidth) * xScale + Math.sin(t * 0.01) * 2,
                                    1000 +
                                    (j - halfGridHeight) * yScale +
                                    Math.cos(t * 0.007) * 2 +
                                    -mouseProximity,
                                ];
                                const p1 = noise.get(...xy, t * 0.03);
                                const p2 = noise.get(...xy, t * 0.03 + 0.5);
                                // for some reason, this library's output range is [0,0.5], so this averages to [0,1]
                                const p = p1 + p2;

                                const paletteIndex = Math.floor(paletteLength * p);

                                const rgb = palette[paletteIndex];
                                const a = Math.floor(Math.max(alpha, mouseProximity) * 255)
                                    .toString(16)
                                    .padStart(2, "0");

                                context.fillStyle = `${rgb}${a}`;
                                context.fillRect(i, j, 1, 1);
                            }
                        }
                    }

                    getT() {
                        const t = (Date.now() * 30) / 1000;
                        // make it smoother while interacting
                        return this.mouseCell ? t : Math.floor(t);
                    }
                }
            );

            function initNoise() {
                const noise = new perlinNoise3d();
                noise.perlin_octaves = 1; // ?? defaults
                noise.perlin_amp_falloff = 1;
                return noise;
            }

            function sigmoid(x) {
                return 1 / (1 + Math.exp(-x));
            }
        })();
    </script>
    <script>
        (() => {
            customElements.define(
                "magnetic-field-client",
                class MagneticField extends BaseElement {
                    constructor() {
                        super();

                        this.asyncCanvas = this.asyncQuerySelector("canvas");
                        this.context = null;

                        this.lastT = 0;

                        this.ripples = [];

                        // todo: move isVisible to BaseElement, like isConnected
                        this.isVisible = true;
                        this.visibilityListener({
                            show: () => {
                                this.isVisible = true;
                                this.startLoop();
                            },
                            hide: () => (this.isVisible = false),
                        });

                        document.addEventListener("click", (event) => {
                            if (event.target.tagName === "A") return;
                            this.ripple(getMousePos(this));
                        });
                    }

                    ripple(center) {
                        this.ripples.push({
                            center,
                            radius: 0,
                        });
                    }

                    startLoop() {
                        this.loop();
                    }

                    async loop() {
                        if (!this.isVisible) {
                            return;
                        }

                        const canvas =
                            this.asyncCanvas.value ?? (await this.asyncCanvas.promise);

                        // initialize
                        if (!this.context) {
                            canvas.width = canvas.offsetWidth;
                            canvas.height = canvas.offsetHeight;
                            this.context = canvas.getContext("2d");
                        }

                        this.draw(canvas, this.context);

                        requestAnimationFrame(() => this.loop());
                    }

                    /**
                     * @param canvas {HTMLCanvasElement}
                     * @param context {CanvasRenderingContext2D}
                     */
                    draw(canvas, context) {
                        const t = getT();
                        if (t <= this.lastT) return;

                        const stepSize = 40;
                        const halfStep = stepSize / 2;

                        let mousePos = getMousePos(this);

                        context.clearRect(0, 0, canvas.width, canvas.height);
                        context.lineWidth = 6;
                        context.lineCap = "round";

                        const width = Math.floor(canvas.width / stepSize) * stepSize;
                        const height = Math.floor(canvas.height / stepSize) * stepSize;
                        const offsetX = (canvas.width - width) / 2;
                        const offsetY = (canvas.height - height) / 2;

                        for (let x = offsetX; x <= offsetX + width; x += stepSize) {
                            for (let y = offsetY; y <= offsetY + height; y += stepSize) {
                                const mouseDist = Math.hypot(mousePos.x - x, mousePos.y - y);
                                const halfLength = halfStep * 0.4;
                                let angle = mousePos ?
                                    Math.atan2(mousePos.x - x, mousePos.y - y) +
                                    (Math.PI * sigmoid(mouseDist / 60 - 6)) / 2 :
                                    (x + y) / 300;

                                angle += t * 0.02;

                                let color = [0x22, 0x22, 0x22];
                                const highlightColor = [0x54, 0xf8, 0xc1];

                                for (const ripple of this.ripples) {
                                    const rippleDist = Math.hypot(
                                        ripple.center.x - x,
                                        ripple.center.y - y
                                    );
                                    const waveDist = Math.abs(rippleDist - ripple.radius);

                                    angle -= ((1 - sigmoid(waveDist / 60 - 3)) * Math.PI) / 2;

                                    // interpolate color to highlightColor based on waveDist
                                    color.forEach(
                                        (v, i) =>
                                        (color[i] = lerp(
                                            highlightColor[i],
                                            v,
                                            sigmoid(waveDist / 20 - 3)
                                        ))
                                    );
                                }
                                context.strokeStyle = `rgb(${color[0]} ${color[1]} ${color[2]})`;

                                const lx = Math.sin(angle) * halfLength;
                                const ly = Math.cos(angle) * halfLength;

                                context.beginPath();
                                context.moveTo(x - lx, y - ly);
                                context.lineTo(x + lx, y + ly);
                                context.stroke();
                            }
                        }

                        for (let i = this.ripples.length - 1; i >= 0; i--) {
                            const ripple = this.ripples[i];
                            ripple.radius += (t - this.lastT) * 50;
                            if (ripple.radius > canvas.width && ripple.radius > canvas.width) {
                                this.ripples.splice(i, 1);
                            }
                        }

                        this.lastT = t;
                    }
                }
            );

            function getMousePos(element) {
                // mousePosition from lib/common
                if (!window.mousePosition) return null;
                const {
                    x,
                    y
                } = window.mousePosition;
                const bounds = element.getBoundingClientRect();
                return {
                    x: x - bounds.x,
                    y: y - bounds.y,
                };
            }

            function getT() {
                const t = (Date.now() * 30) / 1000;
                return Math.floor(t);
            }

            function lerp(a, b, t) {
                return a + (b - a) * t;
            }

            function sigmoid(x) {
                return 1 / (1 + Math.exp(-x));
            }
        })();
    </script>
</head>




<body>

    <div class="page-wrapper">

        <div class="page-wrapper-content">

            <header class="main-header float prehide">
                <div class="main-header-bar">
                    <a href="/" class="main-header-item select">Home</a>
                    <a href="/wares/" class="main-header-item ">Wares</a>
                    <img class="main-header-icon" src="/icons/yay_sheet.png" alt="">
                    <a href="/art/" class="main-header-item ">Art</a>
                    <a href="/notes/" class="main-header-item ">Notes</a>
                    <div class="main-header-indicator"></div>
                </div>
            </header>

            <section class="header">
                <div class="header-content">
                    <div class="header-circle">


                        <nebula-client class="nebula" palette="#e79907 #bf1852 #4d4aff #0ad591" mouse="">
                            <canvas style="filter: contrast(1.5)">
                            </canvas></nebula-client>
                        <div class="home-circle-text header-circle-text-big">
                            <span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-108.75deg); transform-origin: 0.5ch 18vh">W</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-101.25deg); transform-origin: 0.5ch 18vh">e</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-93.75deg); transform-origin: 0.5ch 18vh">l</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-86.25deg); transform-origin: 0.5ch 18vh">c</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-78.75deg); transform-origin: 0.5ch 18vh">o</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-71.25deg); transform-origin: 0.5ch 18vh">m</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-63.75deg); transform-origin: 0.5ch 18vh">e</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-56.25deg); transform-origin: 0.5ch 18vh"> </span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-48.75deg); transform-origin: 0.5ch 18vh">t</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-41.25deg); transform-origin: 0.5ch 18vh">o</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-33.75deg); transform-origin: 0.5ch 18vh"> </span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-26.25deg); transform-origin: 0.5ch 18vh">m</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-18.75deg); transform-origin: 0.5ch 18vh">y</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-11.25deg); transform-origin: 0.5ch 18vh"> </span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(-3.75deg); transform-origin: 0.5ch 18vh">p</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(3.75deg); transform-origin: 0.5ch 18vh">e</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(11.25deg); transform-origin: 0.5ch 18vh">r</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(18.75deg); transform-origin: 0.5ch 18vh">s</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(26.25deg); transform-origin: 0.5ch 18vh">o</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(33.75deg); transform-origin: 0.5ch 18vh">n</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(41.25deg); transform-origin: 0.5ch 18vh">a</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(48.75deg); transform-origin: 0.5ch 18vh">l</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(56.25deg); transform-origin: 0.5ch 18vh"> </span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(63.75deg); transform-origin: 0.5ch 18vh">w</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(71.25deg); transform-origin: 0.5ch 18vh">e</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(78.75deg); transform-origin: 0.5ch 18vh">b</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(86.25deg); transform-origin: 0.5ch 18vh">s</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(93.75deg); transform-origin: 0.5ch 18vh">i</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(101.25deg); transform-origin: 0.5ch 18vh">t</span><span class="curved" style="transform: translateX(calc(18vh - 0.5ch)) rotate(108.75deg); transform-origin: 0.5ch 18vh">e</span>
                        </div>
                        <div class="home-circle-text header-circle-text-small">
                            <span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-81deg); transform-origin: 0.5ch 13vh">W</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-72deg); transform-origin: 0.5ch 13vh">e</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-63deg); transform-origin: 0.5ch 13vh">l</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-54deg); transform-origin: 0.5ch 13vh">c</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-45deg); transform-origin: 0.5ch 13vh">o</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-36deg); transform-origin: 0.5ch 13vh">m</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-27deg); transform-origin: 0.5ch 13vh">e</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-18deg); transform-origin: 0.5ch 13vh"> </span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(-9deg); transform-origin: 0.5ch 13vh">t</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(0deg); transform-origin: 0.5ch 13vh">o</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(9deg); transform-origin: 0.5ch 13vh"> </span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(18deg); transform-origin: 0.5ch 13vh">m</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(27deg); transform-origin: 0.5ch 13vh">y</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(36deg); transform-origin: 0.5ch 13vh"> </span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(45deg); transform-origin: 0.5ch 13vh">s</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(54deg); transform-origin: 0.5ch 13vh">i</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(63deg); transform-origin: 0.5ch 13vh">t</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(72deg); transform-origin: 0.5ch 13vh">e</span><span class="curved" style="transform: translateX(calc(13vh - 0.5ch)) rotate(81deg); transform-origin: 0.5ch 13vh">!</span>
                        </div>
                        <img class="home-circle-icon header-icon" src="/icons/yay_sheet.png" alt="">
                    </div>

                    <span class="intro-text">
                        <div class="intro-spacer"></div>
                        <span id="greeting" class="intro-line"><span id="home-greeting">hello!</span></span>
                        <br>
                        <span class="intro-line">
                            I’m Lean
                            <a target="_blank" class="ipa" href="https://ipa-reader.xyz/?text=lian">/<span class="ipa-text">liˈan</span>/<span class="ipa-icon">🔊</span></a>,
                        </span>
                        <br>
                        <span class="intro-line"> software engineer </span>
                        <br>
                        <span class="intro-line"> who likes making stuff, </span>
                        <br>
                        <span class="intro-line"> code, art, and music. </span>
                        <br>
                        <br>
                        <span class="intro-line"> Nice to meet you. </span>
                        <br>
                        <span class="intro-line">
                            Please, <span class="great-time-trigger" onclick="haveAGreatTime(event)">have a great time.</span>
                        </span>
                    </span>
                </div>
            </section>

            <div id="great-time-counter" class="great-time-counter">
                you now have <span id="great-time-num">0</span> great time(s)
            </div>

            <section class="section about-section">
                <h2 class="section-title">About me</h2>
                <p>My name is Lean Rada.</p>
                <p>I want to build good things using technology.</p>
                <p>
                    My interests are programming, interactive things, procedural animations,
                    algorithms, art, music theory, games, and tech.
                </p>
                <p>
                    Currently I’m working at Google building Maps for Android Auto(motive).
                    Otherwise I’m doing this website and my blog!
                </p>
                <p>
                    <strong>
                        <a target="_self" class="text-link " href="misc/">More fun&nbsp;facts!</a>
                    </strong>
                </p>


                <magnetic-field-client class="magnetic-field">
                    <canvas>
                    </canvas></magnetic-field-client>
            </section>

            <section class="section projects-section">
                <h2 class="section-title">Some things I’ve made</h2>
                <div class="card-grid  card-grid-tall ">


                    <a class="card-grid-item card-grid-thumbalign-center" href="/wares/wikawik/">
                        <div class="card-grid-image-container">
                            <img srcset="/wares/wikawik/media/wikawik_546.generated.jpg 546w" sizes=" 546px" class="card-grid-image" src="/wares/wikawik/media/wikawik.jpg" alt="" spec="546">
                        </div>
                        <div class="card-grid-title-wrap">
                            <div class="card-grid-title-bar">
                                <div class="card-grid-title-content">
                                    <div class="card-grid-title">Wikawik</div>
                                    <div class="card-grid-posttitle">2020 · Interactive language map</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-grid-content">
                            <div class="card-grid-posttitle card-grid-postitle-small">
                                2020 · Interactive language map
                            </div>
                            <div class="card-grid-actions">
                                <span class="card-grid-action card-grid-info">info</span>
                                <span class="card-grid-action card-grid-story">story</span>
                            </div>
                            <div class="card-grid-description">

                                A webapp that shows the diversity of languages in the Philippines. Learn about
                                the local languages. Listen to local songs and other media. Made in vanilla JS
                                with D3.js. Passion project.

                                <span class="card-grid-action card-grid-story" aria-label="Read post - Wikawik">Read post</span>
                            </div>
                        </div>
                    </a>
                    <a class="card-grid-item card-grid-thumbalign-center" href="/wares/hypertangram/">
                        <div class="card-grid-image-container">
                            <img srcset="/wares/hypertangram/media/ht-thumb_546.generated.png 546w" sizes=" 546px" class="card-grid-image" src="/wares/hypertangram/media/ht-thumb.png" alt="" spec="546">
                        </div>
                        <div class="card-grid-title-wrap">
                            <div class="card-grid-title-bar">
                                <div class="card-grid-title-content">
                                    <div class="card-grid-title">Hypertangram</div>
                                    <div class="card-grid-posttitle">2018 · Geometric puzzle game</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-grid-content">
                            <div class="card-grid-posttitle card-grid-postitle-small">
                                2018 · Geometric puzzle game
                            </div>
                            <div class="card-grid-actions">
                                <span class="card-grid-action card-grid-info">info</span>
                                <span class="card-grid-action card-grid-story">story</span>
                            </div>
                            <div class="card-grid-description">

                                A puzzle game about fitting shapes together. Just like tangram, but the pieces
                                are resizable! Runs on Android. Supports multi-touch interactions for rotating
                                and resizing! Hobby project.

                                <span class="card-grid-action card-grid-story" aria-label="Read post - Hypertangram">Read post</span>
                            </div>
                        </div>
                    </a>
                    <a class="card-grid-item card-grid-thumbalign-default" href="/wares/canva-photo-editor/">
                        <div class="card-grid-image-container">
                            <img srcset="/wares/canva-photo-editor/img/canvaphotoeditor_1_546.generated.jpg 546w" sizes=" 546px" class="card-grid-image" src="/wares/canva-photo-editor/img/canvaphotoeditor_1.jpg" alt="" spec="546">
                        </div>
                        <div class="card-grid-title-wrap">
                            <div class="card-grid-title-bar">
                                <div class="card-grid-title-content">
                                    <div class="card-grid-title">Photo Editor</div>
                                    <div class="card-grid-posttitle">2019 · Online image editing</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-grid-content">
                            <div class="card-grid-posttitle card-grid-postitle-small">
                                2019 · Online image editing
                            </div>
                            <div class="card-grid-actions">
                                <span class="card-grid-action card-grid-info">info</span>
                                <span class="card-grid-action card-grid-story">story</span>
                            </div>
                            <div class="card-grid-description">

                                A webapp for quick photo edits. Apply filters. Adjust contrast. Sharpen, blur.
                                Crop, rotate, and resize. Made with React, Canvas API, and WebGL. Project at
                                Canva.

                                <span class="card-grid-action card-grid-story" aria-label="Read post - Photo Editor">Read post</span>
                            </div>
                        </div>
                    </a>
                    <a class="card-grid-item card-grid-thumbalign-center" href="/wares/dimensions/">
                        <div class="card-grid-image-container">
                            <img srcset="/wares/dimensions/media/dimensions_0_546.generated.jpg 546w" sizes=" 546px" class="card-grid-image" src="/wares/dimensions/media/dimensions_0.jpg" alt="" spec="546">
                        </div>
                        <div class="card-grid-title-wrap">
                            <div class="card-grid-title-bar">
                                <div class="card-grid-title-content">
                                    <div class="card-grid-title">Dimensions</div>
                                    <div class="card-grid-posttitle">2019 · Augmented reality generative art</div>
                                </div>
                            </div>
                        </div>
                        <div class="card-grid-content">
                            <div class="card-grid-posttitle card-grid-postitle-small">
                                2019 · Augmented reality generative art
                            </div>
                            <div class="card-grid-actions">
                                <span class="card-grid-action card-grid-info">info</span>
                                <span class="card-grid-action card-grid-story">story</span>
                            </div>
                            <div class="card-grid-description">

                                Generative art with extra dimensions. Web-based, uses Vue.js for the generator
                                and a three.js-based mobile webapp for the AR experience. Made for a workplace
                                event.

                                <span class="card-grid-action card-grid-story" aria-label="Read post - Dimensions">Read post</span>
                            </div>
                        </div>
                    </a>


                </div>


                <a target="_self" class="text-link more-projects" href="/wares/">More</a>
            </section>

            <section class="section labs-section">
                <h2 class="section-title">From the lab</h2>
                <div class="gallery-grid">

                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://leanrada.com/genuary_2023/18/">
                            <img srcset="/labs/wc-sim-18_280.generated.png 280w" sizes=" 280px" class="gallery-grid-media" alt="Watercolour simulator [Warning: GPU heavy]" src="/labs/wc-sim-18.png" spec="280">
                            <span class="gallery-grid-label">Watercolour simulator [Warning: GPU heavy]</span>
                        </a>
                    </div>
                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://leanrada.com/genuary_2023/09/">
                            <img srcset="/labs/wc-sim-9_280.generated.png 280w" sizes=" 280px" class="gallery-grid-media" alt="Flowers in simulated watercolour [Warning: GPU heavy]" src="/labs/wc-sim-9.png" spec="280">
                            <span class="gallery-grid-label">Flowers in simulated watercolour [Warning: GPU heavy]</span>
                        </a>
                    </div>
                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://codepen.io/kalabasa/pen/OJLQEWY">
                            <video class="gallery-grid-media" muted="" autoplay="" loop="" src="/labs/3d-hamburger.opt.mp4"></video>
                            <span class="gallery-grid-label">3D hamburger menu animation</span>
                        </a>
                    </div>
                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://codepen.io/kalabasa/pen/oVMOZK">
                            <img srcset="/labs/pure-css-ai-tic-tac-toe_280.generated.png 280w" sizes=" 280px" class="gallery-grid-media" alt="Tic-tac-toe AI written in pure CSS. Can you beat a stylesheet?" src="/labs/pure-css-ai-tic-tac-toe.png" spec="280">
                            <span class="gallery-grid-label">Tic-tac-toe AI written in pure CSS. Can you beat a stylesheet?</span>
                        </a>
                    </div>
                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://leanrada.com/genuary_2022/04/">
                            <img srcset="/labs/floridablanca_280.generated.png 280w" sizes=" 280px" class="gallery-grid-media" alt="Floridablanca - flow art generator" src="/labs/floridablanca.png" spec="280">
                            <span class="gallery-grid-label">Floridablanca - flow art generator</span>
                        </a>
                    </div>
                    <div class="gallery-grid-item-block">
                        <a target="_blank" class="gallery-grid-item" href="https://leanrada.com/genuary_2023/28/">
                            <img srcset="/labs/poetry-gen_280.generated.png 280w" sizes=" 280px" class="gallery-grid-media" alt="Poetry generator" src="/labs/poetry-gen.png" spec="280">
                            <span class="gallery-grid-label">Poetry generator</span>
                        </a>
                    </div>

                </div>
            </section>

        </div>
        <footer class="main-footer">
            <div class="main-footer-content-part">
                <p class="main-footer-line">
                    <a target="_self" class="main-footer-nav" href="/">Home</a> ·
                    <a target="_self" class="main-footer-nav" href="/wares/">Software</a> ·
                    <a target="_self" class="main-footer-nav" href="/art/">Art</a> ·
                    <a target="_self" class="main-footer-nav" href="/notes/">Notes</a> ·
                    <a target="_self" class="main-footer-nav" href="/misc/">Misc</a>
                </p>
                <p class="main-footer-line">(C) 2023 Lean Rada</p>
            </div>
            <div class="main-footer-content-part">
                <h2 class="main-footer-links-heading">On the web</h2>
                <a target="_blank" class="home-link" href="https://www.linkedin.com/in/leanrada/">
                    <img class="home-link-icon" alt="LinkedIn" src="/icons/linkedin.png">
                </a>
                <a target="_blank" class="home-link" href="https://codepen.io/kalabasa">
                    <img class="home-link-icon" alt="CodePen" src="/icons/codepen.png">
                </a>
                <a target="_blank" class="home-link" href="https://stackoverflow.com/users/3144156/kalabasa">
                    <img class="home-link-icon" alt="Stack Overflow" src="/icons/stackoverflow.png">
                </a>
                <a target="_blank" class="home-link" href="https://github.com/Kalabasa">
                    <img class="home-link-icon" alt="GitHub" src="/icons/github.png">
                </a>
            </div>


            <nebula-client class="main-footer-nebula" palette="#0ad591 #ff2b75 #ffb833 #0ad591 #0ad591 #4d4aff #0ad591" width="40" height="10">
                <canvas style="filter: contrast(1.5)">
                </canvas></nebula-client>
            <button class="main-footer-top-btn" aria-label="Back to top">^</button>
        </footer>
    </div>


    <script>
        (() => {
            const topBtn = document.querySelector(".main-footer-top-btn");
            topBtn.addEventListener("click", () => {
                window.scrollTo(0, 0);
            });
        })();
    </script>
    <script>
        (() => {
            let hasTouch = false;
            document.addEventListener("touchstart", () => (hasTouch = true), {
                once: true,
            });

            const items = document.querySelectorAll(".gallery-grid-item");
            let selectedItem = null;

            // in touchscreens: first tap selects the item, second tap opens the link
            document.addEventListener("click", (event) => {
                if (selectedItem) {
                    selectedItem.classList.remove("selected");
                }

                if (!hasTouch) return;

                for (const item of items) {
                    if (!item.contains(event.target)) continue;
                    if (selectedItem === item) {
                        return; // proceed with link
                    } else {
                        event.preventDefault();
                        item.classList.add("selected");
                        selectedItem = item;
                        return;
                    }
                }

                // loop exhausted, no clicked item
                selectedItem = null;
            });
        })();
    </script>
    <script>
        (() => {
            const items = document.querySelectorAll(".card-grid-item");
            for (const item of items) {
                const info = item.querySelector(".card-grid-info");
                info.addEventListener("click", (event) => {
                    console.log(event);
                    event.preventDefault();
                    item.classList.add("card-grid-item-expanded");
                });
            }
        })();
    </script>
    <script>
        (() => {
            const container = document.getElementById("great-time-counter");
            const num = document.getElementById("great-time-num");

            let greatTimes = 0;

            window.haveAGreatTime = function(event) {
                event.preventDefault();
                event.stopPropagation();

                greatTimes++;
                num.innerText = greatTimes;
                if (greatTimes === 1) {
                    container.style.display = "block";
                } else {
                    container.classList.add("flash");
                    setTimeout(() => container.classList.remove("flash"), 34);
                }
            };
        })();
    </script>
    <script>
        const greeting = document.getElementById("greeting");

        let text = greeting.textContent;
        // todo: more?
        text =
            pick("Hello!", "What’s up ↑", "Hi there →", "Hey there →");
        greeting.textContent = text;

        function pick(...choices) {
            return choices[Math.floor(Math.random() * choices.length)];
        }
    </script>
    <script>
        (() => {
            const mainHeader = document.querySelector(".main-header");
            const indicator = document.querySelector(".main-header-indicator");

            let currentY = 0;
            let currentYTarget = 0;

            let mouseHovering = false;

            let isTouch = false;
            let lastScrollY = window.scrollY;
            let lastCursorY = 0;
            window.addEventListener("scroll", debounce(onScroll));
            window.addEventListener("mousemove", debounce(onMouseMove, 100));
            window.addEventListener("touchstart", onWindowTouchStart);
            window.addEventListener("touchmove", onWindowTouchMove);
            mainHeader.addEventListener("touchstart", onTouchStart);

            function onScroll(event) {
                const dy = window.scrollY - lastScrollY;

                // move with the page
                currentY -= dy;
                if (currentY > 0) {
                    currentY = 0;
                } else if (currentY < -mainHeader.offsetHeight) {
                    currentY = -mainHeader.offsetHeight;
                }

                currentYTarget = currentY;
                updateDOM();

                lastScrollY = window.scrollY;
            }

            function onMouseMove(event) {
                if (isTouch) return;

                const dy = event.clientY - lastCursorY;

                // show when mouse goes near the top
                const scaledDy = Math.sign(dy) * Math.log1p(Math.abs(dy)) * 20;
                if (dy < 0 && event.clientY + scaledDy < mainHeader.offsetHeight) {
                    currentYTarget = 0;
                    mouseHovering = true;
                } else if (
                    mouseHovering &&
                    dy > 0 &&
                    event.clientY > mainHeader.offsetHeight * 4
                ) {
                    currentYTarget = Math.max(-window.scrollY, -mainHeader.offsetHeight);
                    mouseHovering = false;
                }

                updateDOM();
                lastCursorY = event.clientY;
            }

            function onWindowTouchStart(event) {
                isTouch = true;
                lastCursorY = event.touches[0].clientY;
            }

            function onWindowTouchMove(event) {
                const dy = event.touches[0].clientY - lastCursorY;

                // move with touch but only if at edge
                if (window.scrollY <= 0 && dy > 0) {
                    currentY += dy;
                    if (currentY >= 0) {
                        currentY = 0;
                        document.body.style.overscrollBehaviorY = null;
                    } else if (currentY < 0) {
                        document.body.style.overscrollBehaviorY = "none";
                    }

                    currentYTarget = currentY;
                    updateDOM();
                }

                lastCursorY = event.touches[0].clientY;
            }

            function onTouchStart(event) {
                currentYTarget = 0;
                updateDOM();
                console.log("onTouchStart");
            }

            const updateDOM = debounce(() => {
                mainHeader.style.transform = `translateY(${currentY.toFixed(2)}px)`;

                const isHidden = currentY < -mainHeader.offsetHeight * 0.8;
                mainHeader.classList.toggle("hidden", isHidden);

                if (Math.abs(currentY - currentYTarget) > 1) {
                    currentY += (currentYTarget - currentY) * 0.2;
                    requestAnimationFrame(updateDOM);
                } else {
                    currentY = currentYTarget;
                }
            });

            if (mainHeader.classList.contains("prehide")) {
                document.body.style.overscrollBehaviorY = "none";
                currentY = currentYTarget = -mainHeader.offsetHeight;
                updateDOM();
            }

            function debounce(fn, ms = 0) {
                let recentlyFired = false;
                return (...args) => {
                    if (recentlyFired) return;
                    recentlyFired = true;
                    if (ms === 0) {
                        requestAnimationFrame(() => (recentlyFired = false));
                    } else {
                        setTimeout(() => (recentlyFired = false), ms);
                    }
                    return fn(...args);
                };
            }
        })();
    </script>
    <script>
        (() => {
            document.body.classList.toggle("start-from-top", window.scrollY < 100);

            const yayIcon = document.querySelector(".header-icon");
            const sayLean = new Audio("/lean.mp3");
            let sayTime = 0;

            const ipa = document.querySelector(".ipa");
            ipa.addEventListener("click", (event) => {
                if (sayLean.readyState >= /*HAVE_ENOUGH_DATA*/ 4) {
                    event.preventDefault();
                    sayLean.play();
                }
            });

            function animateYay() {
                const t = (Date.now() - sayTime) / (sayLean.duration * 1000);

                if (t >= 1) {
                    yayIcon.style.objectPosition = null;
                } else {
                    const frame = Math.floor(lerp(0, 3, t));
                    if (frame >= 0 && frame <= 2) {
                        yayIcon.style.objectPosition = 40 + (frame % 3) * 20 + "% 0";
                    } else if (frame > 2) {
                        yayIcon.style.objectPosition = "40% 0";
                    } else {
                        yayIcon.style.objectPosition = null;
                    }
                    requestAnimationFrame(animateYay);
                }
            }

            sayLean.addEventListener("play", () => {
                // hardcoded offset
                sayTime = Date.now() + 300;
                animateYay();
            });

            function lerp(a, b, t) {
                return a + (b - a) * t;
            }
        })();
    </script>
</body>
</html>