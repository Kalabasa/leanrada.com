<html>
<head>
    <title>Wikawik · leanrada.com</title>
    <script defer="" async="" src="https://unpkg.com/perlin-noise-3d@0.5.4/dist/perlin-noise-3d.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/favicon.png">
    <script data-goatcounter="https://kalabasa.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>
    <style>
        @font-face {
            font-family: "Space Mono";
            src: url("/fonts/SpaceMono-Regular.ttf") format("truetype");
        }

        @font-face {
            font-family: "Space Mono";
            font-style: italic;
            src: url("/fonts/SpaceMono-Italic.ttf") format("truetype");
        }

        @font-face {
            font-family: "Miriam Libre";
            src: url("/fonts/MiriamLibre-Regular.ttf") format("truetype");
        }

        @font-face {
            font-family: "Miriam Libre";
            font-weight: bold;
            src: url("/fonts/MiriamLibre-Bold.ttf") format("truetype");
        }

        :root {
            --default-font: "Space Mono", monaco, Consolas, Lucida Console, monospace;
            --reading-font: "Miriam Libre", Futura, "Trebuchet MS", Arial, sans-serif;

            --bg-clr: #111;
            --card-clr: #222;
            --clr0-light: #54f8c1;
            --clr0: #0ad591;
            --clr0-dark: #018b5d;
            --clr1: #df2063;

            --text-clr: #fff;
            --text2-clr: #999;

            --ease: cubic-bezier(0.8, 0, 1, 1);
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: var(--default-font, monospace);
            background-color: var(--bg-clr, #111);
            color: var(--text-clr, #fff);
            overflow-x: hidden;
        }

        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100%;
        }

        .page-wrapper-content {
            flex: 1 1 auto;
        }
    </style>
    <style>
        nebula-client>canvas {
            width: 100%;
            height: 100%;
        }
    </style>
    <style>
        .home-link {
            text-decoration: none;
        }

        .home-link-icon {
            width: 48px;
            height: 48px;
            image-rendering: pixelated;
        }

        .home-link-icon:hover {
            filter: invert(1);
        }
    </style>
    <style>
        .main-footer {
            position: relative;
            display: flex;
            justify-content: space-between;
            gap: 60px;
            padding: 60px calc(max(60px, 50vw - 600px)) 60px;
            font-size: 18px;
            font-weight: bold;
            background: var(--clr0);
            color: #000;
            overflow: hidden;
            content-visibility: auto;
            contain-intrinsic-height: 220x;
        }

        .main-footer-links-heading {
            margin: 0 0 18px;
            font-size: inherit;
        }

        .main-footer-line {
            margin: 0 0 18px;
        }

        .main-footer-nav {
            color: #000;
        }

        .main-footer-nav:hover {
            color: #fff;
        }

        .main-footer-content-part {
            z-index: 1;
        }

        .main-footer-nebula {
            position: absolute;
            left: -30%;
            top: -30%;
            width: 160%;
            height: 160%;
            z-index: 0;
        }

        .main-footer-top-btn {
            z-index: 2;
            position: absolute;
            right: 0;
            top: 0;
            width: 72px;
            height: 36px;
            padding-right: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-bottom-left-radius: 18px;
            background: var(--bg-clr);
            color: var(--clr0-light);
            font: inherit;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .main-footer-top-btn:hover {
            color: var(--clr1);
        }

        .main-footer-top-btn::before {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            width: 36px;
            height: 18px;
            border-top-right-radius: 18px;
            transform: translateX(-72px);
            box-shadow: 18px 0 0 var(--bg-clr);
        }

        @media (max-width: 700px) {
            .main-footer {
                flex-direction: column-reverse;
            }
        }
    </style>
    <style>
        .main-header {
            position: sticky;
            top: 0;
            width: 100%;
            height: 60px;
            padding: 0 calc(25% - 150px);
            z-index: 100;
            box-sizing: border-box;
            pointer-events: none;
        }

        .main-header.float {
            position: fixed;
        }

        .main-header-bar {
            position: relative;
            display: flex;
            justify-content: space-evenly;
            align-items: flex-end;
            height: 100%;
        }

        .main-header-item {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 6ch;
            height: 36px;
            padding: 0 18px;
            border-radius: 18px;
            font-size: 15px;
            font-weight: bold;
            letter-spacing: 1px;
            text-decoration: none;
            text-transform: uppercase;
            color: #fff;
            backdrop-filter: blur(8px);
            background-image: linear-gradient(60deg, #fff2 60%, transparent 60%);
            background-repeat: no-repeat;
            background-size: 220% 100%;
            background-position: 115%;
            pointer-events: all;
            transition: background-position 0.2s var(--ease);
        }

        .main-header-item:hover {
            background-image: linear-gradient(60deg,
                    #fff2 50%,
                    #fff 50%,
                    #fff 60%,
                    transparent 60%);
            background-position: 0%;
        }

        .main-header-item.select {
            background: #fff2;
        }

        .main-header-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            image-rendering: pixelated;
            object-fit: cover;
            object-position: 0 0;
            filter: invert(1);
            backdrop-filter: blur(8px) invert(1);
            pointer-events: all;
        }

        .main-header-icon:hover {
            object-position: 100% 0;
        }

        @media (max-width: 450px) {
            .main-header-icon {
                display: none;
            }
        }

        .main-header-indicator {
            position: absolute;
            width: 6px;
            height: 6px;
            left: 50%;
            top: calc(100% + 12px);
            transform: translate(-50%, -50%);
            /* border acts as extended touch area */
            border: solid 6mm transparent;
            border-left-width: 45vw;
            border-right-width: 45vw;
            border-radius: 50%;
            background: #fff;
            background-clip: padding-box;
            opacity: 0;
            transition: opacity 50ms;
        }

        .main-header.hidden .main-header-indicator {
            opacity: 0.8;
            pointer-events: all;
        }
    </style>
    <style>
        .blog-page {
            display: flex;
            justify-content: center;
            overflow: hidden;
        }

        .content {
            padding: 60px 18px;
            width: 100%;
            max-width: 700px;
            font-family: var(--reading-font, sans-serif);
            font-size: 18px;
            line-height: 2.2;
            letter-spacing: 0.02em;
            color: #ddd;
            box-sizing: border-box;
        }

        .markdown>h1,
        .markdown>h2,
        .markdown>h3,
        .markdown>h4,
        .markdown>h5,
        .markdown>h6 {
            font-family: var(--default-font, monospace);
            font-weight: lighter;
            font-style: italic;
            line-height: 1.6;
            letter-spacing: 0.04em;
            margin: 36px 0;
        }

        .markdown>h1 {
            text-align: center;
            font-size: 200%;
        }

        .markdown>h2 {
            font-size: 150%;
        }

        .markdown>h3,
        .markdown>h4,
        .markdown>h5,
        .markdown>h6 {
            font-size: 120%;
        }

        .markdown>p {
            margin: 36px 0;
        }

        .markdown>hr {
            width: 36px;
            margin: 90px auto;
            border: solid 1.5px #ccc;
            background: #ccc;
            border-radius: 3px;
        }

        .markdown code:not([class]):not([class]) {
            display: inline-block;
            padding: 0 6px;
            border-radius: 6px;
            font-family: var(--default-font, monospace);
            background: var(--card-clr);
        }

        .markdown>pre:not([class])>code:not([class]) {
            display: block;
            padding: 18px;
            border-radius: 18px;
            line-height: 1.6;
            overflow-x: auto;
        }

        .markdown>blockquote {
            position: relative;
            margin: 0;
            padding: 18px 24px;
            border-radius: 18px;
            border: solid 1px var(--clr0);
            font-size: 21px;
        }

        .markdown>blockquote::before {
            content: "";
            position: absolute;
            right: 100%;
            top: 0;
            height: 24px;
            width: 24px;
            border-bottom: solid 1px var(--clr0);
            box-sizing: border-box;
        }

        .markdown>blockquote::after {
            content: "";
            position: absolute;
            right: 100%;
            top: 24px;
            bottom: 18px;
            width: 24px;
            border-top-right-radius: 24px;
            border: solid var(--clr0);
            border-width: 1px 1px 0 0;
            box-shadow: 9px 0 0 var(--bg-clr), 18px 0 0 var(--bg-clr);
            box-sizing: border-box;
        }

        .markdown>blockquote> :first-child {
            margin-top: 0;
        }

        .markdown>blockquote> :last-child {
            margin-bottom: 0;
        }

        .markdown>blockquote cite {
            display: block;
            margin-top: 12px;
            font-size: 15px;
            font-style: inherit;
        }

        .markdown>blockquote cite::before {
            content: "—";
        }

        .markdown>iframe {
            max-width: calc(100vw - 18px);
            border: none;
            border-radius: 18px;
            background: #fff;
        }

        .markdown .center {
            text-align: center;
        }

        .markdown .center-flex {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* todo? convert to component <blog-bleed>, reuse across <blog-media> */
        .markdown .bleed {
            position: relative;
            left: 50%;
            width: 100vh;
            max-width: max(min(100vw, 800px), 80vw);
            transform: translateX(-50%);
        }

        /* todo: convert to component <caption>, reuse across <blog-media> */
        .markdown .caption {
            display: block;
            font-size: 15px;
        }
    </style>
    <style>
        .text-link {
            color: var(--clr0-light, #fff);
        }

        .text-link:visited {
            color: var(--clr0, #fff);
        }
    </style>
    <style>
        .project-info-card {
            font-family: var(--default-font);
            font-size: 15px;
            line-height: 1.6;
        }

        .project-info-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .project-info-card-title {
            flex: 0 0 auto;
            align-self: stretch;
            position: relative;
            margin-right: 12px;
            padding: 12px 18px 6px 12px;
            border-radius: 18px 18px 0 0;
            font-style: italic;
            text-decoration: underline;
            background-color: var(--card-clr);
        }

        .project-info-card-title::after {
            content: "";
            position: absolute;
            left: 100%;
            bottom: 0;
            width: 36px;
            height: 18px;
            border-bottom-left-radius: 18px;
            box-shadow: -18px 0 0 var(--card-clr);
        }

        .project-info-card-fields {
            display: grid;
            grid-auto-flow: column;
            grid-template-rows: 1fr 1fr;
            padding: 12px;
            border-radius: 0 18px 18px 18px;
            background-color: var(--card-clr);
        }

        @media (max-width: 600px) {
            .project-info-card-fields {
                display: block;
            }
        }

        .project-info-card-field {
            display: flex;
        }

        .project-info-card-field-label {
            padding: 6px;
            font-style: italic;
        }

        .project-info-card-field-value {
            padding: 6px;
            font-weight: bold;
        }
    </style>
    <style>
        .btn,
        .btn:visited {
            padding: 6px 12px;
            border-radius: 12px;
            border: none;
            font-family: var(--default-font);
            font-size: 12px;
            font-weight: bold;
            text-decoration: none;
            background: var(--clr0);
            color: #fff;
            cursor: pointer;
        }

        .btn:hover {
            background: var(--clr0-light);
        }
    </style>
    <style>
        .blog-media {
            position: relative;
            text-align: center;
            /* external margin because it's expected to be in an article */
            margin: 36px 0;
        }

        .blog-media-bleed {
            margin: 90px 0;
            max-height: 80vh;
        }

        .blog-media-element {
            display: inline-block;
            max-width: 100%;
            max-height: 80vh;
            border-radius: 18px;
            box-sizing: border-box;
        }

        .blog-media-bleed .blog-media-element {
            position: relative;
            left: 50%;
            max-width: max(min(100vw, 800px), 80vw);
            transform: translateX(-50%);
        }

        .blog-media-windowed .blog-media-element {
            border-radius: 0;
        }

        .blog-media-caption {
            display: block;
            font-size: 15px;
        }
    </style>
    <script>
        (() => {
            globalThis.BaseElement = createBaseElement(HTMLElement);

            const lifecycleListeners = Symbol("lifecycleListeners");

            function createBaseElement(superClass) {
                return class BaseElement extends superClass {
                    constructor() {
                        super();
                        this[lifecycleListeners] = [];
                    }
                    connectedCallback() {
                        this[lifecycleListeners].forEach((it) => it.connect());
                    }
                    disconnectedCallback() {
                        this[lifecycleListeners].forEach((it) => it.disconnect());
                    }

                    /**
                     * @param factory {() => () => void}
                     */
                    addLifecycleListener(factory) {
                        let cleanup = () => {};
                        const connect = () => (cleanup = factory());
                        const disconnect = () => cleanup();

                        this[lifecycleListeners].push({
                            connect,
                            disconnect
                        });

                        if (this.isConnected) {
                            connect();
                        }
                    }

                    /**
                     * @param selector {string}
                     */
                    asyncQuerySelector(selector) {
                        const obj = {
                            exists: false,
                            element: null,
                        };

                        obj.promise = new Promise((resolve) => {
                            const observer = new MutationObserver(() => {
                                obj.element = this.querySelector(selector);
                                if (obj.element) {
                                    resolve(obj.element);
                                    obj.exists = true;
                                    observer.disconnect();
                                }
                            });

                            this.addLifecycleListener(() => {
                                observer.observe(this, {
                                    childList: true,
                                    subtree: true
                                });
                                return () => observer.disconnect();
                            });
                        });

                        return obj;
                    }

                    /**
                     * @param target {Element}
                     * @param event {string}
                     * @param callback {Function}
                     */
                    aliveListener(target, event, callback) {
                        this.addLifecycleListener(() => {
                            target.addEventListener(event, callback);
                            return () => target.removeEventListener(event, callback);
                        });
                    }

                    /**
                     * @param callbacks {object}
                     * @param callbacks.show {Function}
                     * @param callbacks.hide {Function}
                     */
                    visibilityListener({
                        show,
                        hide
                    }) {
                        let isShowing = false;

                        const observer = new IntersectionObserver((entries) => {
                            for (const entry of entries) {
                                if (entry.target !== this) continue;
                                if (isShowing !== entry.isIntersecting) {
                                    isShowing = entry.isIntersecting;
                                    if (isShowing) {
                                        show();
                                    } else {
                                        hide();
                                    }
                                }
                            }
                        });

                        this.addLifecycleListener(() => {
                            isShowing = isInViewport(this);
                            if (isShowing) show();
                            observer.observe(this);
                            return () => {
                                observer.disconnect();
                                if (isShowing) hide();
                                isShowing = false;
                            };
                        });
                    }
                };
            }

            window.mousePosition = {
                x: 0,
                y: 0
            };
            document.addEventListener(
                "DOMContentLoaded",
                () => {
                    document.body.addEventListener("mousemove", (event) => {
                        window.mousePosition.x = event.clientX;
                        window.mousePosition.y = event.clientY;
                    });
                }, {
                    once: true
                }
            );
        })();

        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
                rect.right > 0 &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.top < window.innerHeight
            );
        }
    </script>
    <script>
        (() => {
            customElements.define(
                "nebula-client",
                class Nebula extends BaseElement {
                    constructor() {
                        super();

                        this.asyncCanvas = this.asyncQuerySelector("canvas");
                        this.context = null;
                        this.noise = null;

                        this.gridWidth = 30;
                        this.gridHeight = 30;
                        this.palette = ["#ffffff"];

                        this.cellWidth = 1; // placeholder
                        this.cellHeight = 1; // placeholder

                        this.useMouse = false;
                        this.mouseCell = null;

                        this.lastT = 0;
                        this.startT = 0;
                        this.loopStartT = 0;

                        this.isVisible = false;
                        this.visibilityListener({
                            show: () => {
                                this.isVisible = true;
                                this.startLoop();
                            },
                            hide: () => (this.isVisible = false),
                        });
                    }

                    connectedCallback() {
                        super.connectedCallback();

                        this.useMouse = this.getAttribute("mouse") != null;

                        const gridWidth = this.getAttribute("width");
                        if (gridWidth) {
                            this.gridWidth = Number.parseInt(gridWidth);
                        }

                        const gridHeight = this.getAttribute("height");
                        if (gridHeight) {
                            this.gridHeight = Number.parseInt(gridHeight);
                        }

                        const paletteAttr = this.getAttribute("palette");
                        if (paletteAttr) {
                            this.palette = paletteAttr.split(" ");
                        }
                    }

                    startLoop() {
                        this.loopStartT = this.lastT = this.getT();
                        this.loop();
                    }

                    async loop() {
                        if (!this.isVisible) {
                            return;
                        }

                        if (typeof perlinNoise3d === "undefined") {
                            setTimeout(() => this.loop(), 200);
                            return;
                        } else if (!this.noise) {
                            this.noise = initNoise();
                            this.startT = this.getT();
                        }

                        const canvas =
                            this.asyncCanvas.value ?? (await this.asyncCanvas.promise);

                        // initialize
                        if (!this.context) {
                            this.cellWidth = Math.ceil(canvas.offsetWidth / this.gridWidth);
                            this.cellHeight = Math.ceil(canvas.offsetHeight / this.gridHeight);
                            canvas.width = this.gridWidth;
                            canvas.height = this.gridHeight;
                            canvas.style.filter += ` blur(${
              Math.min(this.cellWidth, this.cellHeight) * 1.25
            }px)`;
                            this.context = canvas.getContext("2d");
                        }

                        this.draw(canvas, this.context);

                        requestAnimationFrame(() => this.loop());
                    }

                    /**
                     * @param canvas {HTMLCanvasElement}
                     * @param context {CanvasRenderingContext2D}
                     */
                    draw(canvas, context) {
                        const t = this.getT();
                        if (t <= this.lastT) return;

                        const alpha = 1 - Math.pow(1 - 0.016, t - this.lastT);
                        this.lastT = t;

                        const {
                            noise,
                            gridWidth,
                            gridHeight,
                            palette,
                            cellWidth,
                            cellHeight,
                        } = this;
                        const halfGridWidth = gridWidth / 2;
                        const halfGridHeight = gridHeight / 2;

                        this.mouseCell = null;
                        // mousePosition from lib/common
                        if (this.useMouse && window.mousePosition) {
                            const {
                                x,
                                y
                            } = window.mousePosition;
                            const bounds = canvas.getBoundingClientRect();
                            if (
                                bounds.left < x &&
                                x < bounds.right &&
                                bounds.top < y &&
                                y < bounds.bottom
                            ) {
                                this.mouseCell = {
                                    x: (x - bounds.x) / cellWidth,
                                    y: (y - bounds.y) / cellHeight,
                                };
                            }
                        }

                        const paletteLength = palette.length;
                        const xScale = 0.14 + Math.sin(t * 0.03) * 0.06;
                        const yScale = 0.14 + Math.cos(t * 0.05) * 0.06;

                        for (let i = 0; i < gridWidth; i++) {
                            for (let j = 0; j < gridHeight; j++) {
                                const mouseProximity =
                                    this.mouseCell == null ?
                                    0 :
                                    1 -
                                    sigmoid(
                                        Math.hypot(i - this.mouseCell.x, j - this.mouseCell.y) - 3
                                    );

                                const xy = [
                                    1000 + (i - halfGridWidth) * xScale + Math.sin(t * 0.01) * 2,
                                    1000 +
                                    (j - halfGridHeight) * yScale +
                                    Math.cos(t * 0.007) * 2 +
                                    -mouseProximity,
                                ];
                                const p1 = noise.get(...xy, t * 0.03);
                                const p2 = noise.get(...xy, t * 0.03 + 0.5);
                                // for some reason, this library's output range is [0,0.5], so this averages to [0,1]
                                const p = p1 + p2;

                                const paletteIndex = Math.floor(paletteLength * p);

                                const rgb = palette[paletteIndex];
                                const a = Math.floor(Math.max(alpha, mouseProximity) * 255)
                                    .toString(16)
                                    .padStart(2, "0");

                                context.fillStyle = `${rgb}${a}`;
                                context.fillRect(i, j, 1, 1);
                            }
                        }
                    }

                    getT() {
                        const t = (Date.now() * 30) / 1000;
                        // make it smoother while interacting
                        return this.mouseCell ? t : Math.floor(t);
                    }
                }
            );

            function initNoise() {
                const noise = new perlinNoise3d();
                noise.perlin_octaves = 1; // ?? defaults
                noise.perlin_amp_falloff = 1;
                return noise;
            }

            function sigmoid(x) {
                return 1 / (1 + Math.exp(-x));
            }
        })();
    </script>
</head>


<body>

    <div class="page-wrapper">
        <header class="main-header">
            <div class="main-header-bar">
                <a href="/" class="main-header-item ">Home</a>
                <a href="/wares/" class="main-header-item ">Wares</a>
                <img class="main-header-icon" src="/icons/yay_sheet.png">
                <a href="/art/" class="main-header-item ">Art</a>
                <a href="/blog/" class="main-header-item ">Blog</a>
                <div class="main-header-indicator"></div>
            </div>
        </header>
        <div class="page-wrapper-content">

            <div class="blog-page">
                <div class="content">

                    <!-- prettier-ignore -->
                    <div class="markdown">
                        <h1 id="wikawik">Wikawik</h1>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_0_332.generated.jpg 332w,/wares/wikawik/media/wikawik_0_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="preview" src="/wares/wikawik/media/wikawik_0.jpg" spec="100% [664) 664" loading="lazy" width="100%" height="" style="aspect-ratio: 1.1111111111111112; background: #48c8d8">
                        </div>

                        <h2 id="language-map-of-the-philippines">Language map of the Philippines</h2>
                        <p>According to the <em>diksiyonaryo</em>: <strong>“wikawik”</strong> is a Filipino word, meaning <em>madaldal</em> or talkative or chatty.</p>
                        <blockquote>
                            <p><strong>wikawik</strong> [wi·ká·wik] <em>adjective</em><br>talks a lot.
                                <cite><a target="_blank" class="text-link " href="https://diksiyonaryo.ph/search/wikawik">diksiyonaryo.ph</a></cite>
                            </p>
                        </blockquote>
                        <p><a target="_blank" class="text-link " href="https://kalabasa.github.io/wikawik/">Wikawik</a>, on the other hand, is a webapp that showcases the various languages spoken in the Philippines.</p>
                        <aside class="project-info-card">
                            <div class="project-info-card-header">
                                <div class="project-info-card-title">Project details</div>
                                <a target="_blank" class="btn " tag="a" href="https://leanrada.com/wikawik/">
                                    Open the app
                                </a>
                            </div>
                            <div class="project-info-card-fields">
                                <div class="project-info-card-field">
                                    <div class="project-info-card-field-label">released</div>
                                    <div class="project-info-card-field-value">2020</div>
                                </div>
                                <div class="project-info-card-field">
                                    <div class="project-info-card-field-label">role</div>
                                    <div class="project-info-card-field-value">creator</div>
                                </div>
                                <div class="project-info-card-field">
                                    <div class="project-info-card-field-label">platform</div>
                                    <div class="project-info-card-field-value">Web</div>
                                </div>
                                <div class="project-info-card-field">
                                    <div class="project-info-card-field-label">tech</div>
                                    <div class="project-info-card-field-value">HTML, JS, D3.js, MobX, GeoJSON</div>
                                </div>
                            </div>
                        </aside>

                        <p>There are over 100 languages spoken across the Philippine archipelago.</p>
                        <p>It’s amazing how diverse the language landscape of the Philippines is, yet it is rarely treasured or celebrated in the Philippines.</p>
                        <p>In my grade school years in the Philippines, we celebrated <a target="_blank" class="text-link " href="https://en.wikipedia.org/wiki/Buwan_ng_Wika"><strong><em>Buwan ng Wika</em></strong></a> (Month of Language) every August, but they never actually taught us about languages in the Philippines. It was only ever about Tagalog. Now that I’m older, I got a wider appreciation of the languages in the Philippines.</p>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_mob_332.generated.jpg 332w,/wares/wikawik/media/wikawik_mob_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="webapp" src="/wares/wikawik/media/wikawik_mob.jpg" spec="100% [664) 664" loading="lazy" width="" height="100%" style="aspect-ratio: 0.5625; background: #48c8d8">
                        </div>

                        <p>This project has been on my list of project ideas for a while now. It was only in 2020 mid-quarantine August that the project gained traction, just in time for <em>Buwan ng Wika</em>.</p>
                        <p>The main idea behind the project was that it would be a phrase book in map form. Instead of the usual map visualization with color-coded regions, there would be phrases shown in local tongues spoken throughout the country.</p>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_332.generated.jpg 332w,/wares/wikawik/media/wikawik_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="visualization of phrases" src="/wares/wikawik/media/wikawik.jpg" spec="100% [664) 664" loading="lazy" width="100%" height="" style="aspect-ratio: 1; background: #48c8d8">
                        </div>

                        <p>The phrases would be translations of everyday words and phrases, such as “good morning” and “good evening”.</p>
                        <p>I also had an idea of having audio recordings of native speakers saying each of the phrases, because not all languages are pronounced the same. However, it wasn’t really feasible for me to do so.</p>
                        <p>Without audio resources, I had to settle on plain text phrases, lacking any pronunciation information.</p>
                        <p>The text phrases are displayed via speech bubbles that pop up from the little person markers scattered throughout the map.</p>
                        <div class="blog-media blog-media-bleed">
                            <img srcset="/wares/wikawik/media/wikawik_1_400.generated.jpg 400w,/wares/wikawik/media/wikawik_1_800.generated.jpg 800w,/wares/wikawik/media/wikawik_1_894.generated.jpg 894w,/wares/wikawik/media/wikawik_1_1146.generated.jpg 1146w,/wares/wikawik/media/wikawik_1_1400.generated.jpg 1400w" sizes="(max-width:400px) 400px,not (min-width:800px) 800px,(max-width:1117px) 894px,(max-width:1433px) 1146px, 1400px" class="blog-media-element" alt="distribution of markers" src="/wares/wikawik/media/wikawik_1.jpg" spec="100% [800) 80% [1750) 1400" loading="lazy" width="400%" height="" style="aspect-ratio: 1.7582417582417582; background: #48c8d8">
                        </div>

                        <p>The distribution of these markers are based on actual language distribution as per census data.</p>
                        <p>Clicking on a marker will conjure an information panel containing details about the selected language.</p>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_2_332.generated.jpg 332w,/wares/wikawik/media/wikawik_2_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="information panel shown" src="/wares/wikawik/media/wikawik_2.jpg" spec="100% [664) 664" loading="lazy" width="100%" height="" style="aspect-ratio: 1; background: #f8f8f8">
                        </div>

                        <p>The information panel contains statistics about the language and the locality in which the selected language is spoken.</p>
                        <p>It also contains info scraped from <strong>Wikipedia</strong> and the <strong>Atlas Filipinas</strong> from the <strong>Komisyon sa Wikang Filipino (KWF)</strong>.</p>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_4_332.generated.jpg 332w,/wares/wikawik/media/wikawik_4_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="language information section in the panel" src="/wares/wikawik/media/wikawik_4.jpg" spec="100% [664) 664" loading="lazy" width="" height="100%" style="aspect-ratio: 0.5622720166753518; background: #f8f8f8">
                        </div>

                        <p>Language endangerment data was obtained from the KWF Atlas as well, though I doubt the accuracy and up-to-dateness of some entries.</p>
                        <p>My favorite part was the <em>Related Media</em> section that features some pieces of music and videos sung or spoken in the local language.</p>
                        <div class="blog-media blog-media-default">
                            <img srcset="/wares/wikawik/media/wikawik_3_332.generated.jpg 332w,/wares/wikawik/media/wikawik_3_664.generated.jpg 664w" sizes="(max-width:332px) 332px, 664px" class="blog-media-element" alt="media section shown" src="/wares/wikawik/media/wikawik_3.jpg" spec="100% [664) 664" loading="lazy" width="" height="100%" style="aspect-ratio: 0.5622720166753518; background: #f8f8f8">
                        </div>

                        <p>I curated these media by hand and I really enjoyed discovering all these music sung in different Philippine languages.</p>
                        <hr>
                        <p>The visualization was implemented using <strong>D3.js</strong>. I also used the <strong>MobX</strong> library to coordinate the whole app. Some smaller geo manipulation utilities helped along too.</p>
                        <p>Everything was written in vanilla JS. In hindsight I should’ve used some UI framework and a compiler, because the main script reached about 2000 lines! This has been a great reminder of the state of the vanilla web; without webpack and without TypeScript.</p>
                        <div class="blog-media blog-media-default">
                            <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Test animation">
                                <source src="/wares/wikawik/media/wikawik_test.mp4">
                                <a href="/wares/wikawik/media/wikawik_test.mp4">Test animation</a>
                            </video><span class="blog-media-caption">Early test of marker entrance animation</span>
                        </div>

                        <p>The research needed for the app was probably the most time-consuming thing I did for this project. For comparison, I finished implementing the main visualization interface in one week. The data cleanup and research took about a month.</p>
                        <p>The data was primarily based on the <strong>Philippine Statistics Authority’s 2010 Census</strong>. The census surveyed, among other things, the main languages spoken at home in sampled households across the country.</p>
                        <p>But it got a little messy. There were inconsistencies throughout the data. Even the PSA and the KWF don’t agree on which are dialects and which are languages.</p>
                        <p>For example, look into Thinking Machine’s story about <a target="_blank" class="text-link " href="https://stories.thinkingmachin.es/philippine-languages/"><strong>The language landscape of the Philippines</strong></a>. That visualization was based on raw PSA data.</p>
                        <p>One example issue with raw PSA data is, you won’t find the <a target="_blank" class="text-link " href="https://en.wikipedia.org/wiki/Rinconada_Bikol_language">Rinconada language</a> in there. PSA classified this language and other Bicol languages as one “Bikol/Bicol”. On the contrary, KWF classifies these non-mutually-intelligible languages separately.</p>
                        <p>There were many such cases of mismatch and misrepresentation in PSA data, which is sad.</p>
                        <p>That’s why a combination of other sources were used to supplement or correct this data, like the KWF Atlas, Ethnologue, Glottolog, and more.</p>
                        <div class="blog-media blog-media-default">
                            <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Preloader animation">
                                <source src="/wares/wikawik/media/wikawik_preloader.mp4">
                                <a href="/wares/wikawik/media/wikawik_preloader.mp4">Preloader animation</a>
                            </video><span class="blog-media-caption">The app loader is an animation of the logo morphing between the letters wi and ka in stylized Baybayin.</span>
                        </div>

                        <p>Related to that were the translated phrases themselves. The phrases were the hardest to research!</p>
                        <p>Usually, meta information about a small language are readily available on the internet, but what I needed were the words themselves - vocabularies, or phrase books. These resources are often non-existent, especially for dying languages that only had a handful of native speakers left.</p>
                        <p>I ended up going through internet listicles, language tutorials, random chatter in public Facebook groups of tribespeople, sparse bilingual dictionaries, and translated Bibles made by missionaries to the Philippines.</p>
                        <p>I know it’s not rigorous research, so I wrote a bunch of disclaimers on the About page.</p>
                        <p>In the end, I got up to 82 translations. And that is for a single phrase only – the default “good morning”. For other phrases, such as “good evening”, not so much. I put up some forms for user submitted translations, but no one has ever submitted anything yet.</p>
                        <div class="blog-media blog-media-default">
                            <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Video of a version of the intro animation">
                                <source src="/wares/wikawik/media/wikawik_intro.mp4">
                                <a href="/wares/wikawik/media/wikawik_intro.mp4">Video of a version of the intro animation</a>
                            </video>
                        </div>

                        <p>It was a fun and educational project. It made me appreciate the Philippine languages more and discover a glimpse of the cultures around the Philippines!</p>
                        <p>Here’s a link to the <a target="_blank" class="text-link " href="https://kalabasa.github.io/wikawik/">webapp</a>. Salamat sa pagbisita!
                        </p>

                    </div>

                </div>
            </div>

        </div>
        <footer class="main-footer">
            <div class="main-footer-content-part">
                <p class="main-footer-line">
                    <a target="_self" class="main-footer-nav" href="/">Home</a> ·
                    <a target="_self" class="main-footer-nav" href="/wares/">Software</a> ·
                    <a target="_self" class="main-footer-nav" href="/art/">Art</a> ·
                    <a target="_self" class="main-footer-nav" href="/blog/">Blog</a>
                </p>
                <p class="main-footer-line">(C) 2023 Lean Rada</p>
            </div>
            <div class="main-footer-content-part">
                <h2 class="main-footer-links-heading">On the web</h2>
                <a target="_blank" class="home-link" href="https://www.linkedin.com/in/leanrada/">
                    <img class="home-link-icon" src="/icons/linkedin.png">
                </a>
                <a target="_blank" class="home-link" href="https://codepen.io/kalabasa">
                    <img class="home-link-icon" src="/icons/codepen.png">
                </a>
                <a target="_blank" class="home-link" href="https://stackoverflow.com/users/3144156/kalabasa">
                    <img class="home-link-icon" src="/icons/stackoverflow.png">
                </a>
                <a target="_blank" class="home-link" href="https://github.com/Kalabasa">
                    <img class="home-link-icon" src="/icons/github.png">
                </a>
            </div>


            <nebula-client class="main-footer-nebula" palette="#0ad591 #ff2b75 #ffb833 #0ad591 #0ad591 #4d4aff #0ad591" width="40" height="10">
                <canvas style="filter: contrast(1.5)">
                </canvas></nebula-client>
            <button class="main-footer-top-btn" aria-label="Back to top">^</button>
        </footer>
    </div>
    <script>
        (() => {
            const topBtn = document.querySelector(".main-footer-top-btn");
            topBtn.addEventListener("click", () => {
                window.scrollTo(0, 0);
            });
        })();
    </script>
    <script>
        (() => {
            const mainHeader = document.querySelector(".main-header");
            const indicator = document.querySelector(".main-header-indicator");

            let currentY = 0;
            let currentYTarget = 0;

            let mouseHovering = false;

            let isTouch = false;
            let lastScrollY = window.scrollY;
            let lastCursorY = 0;
            window.addEventListener("scroll", debounce(onScroll));
            window.addEventListener("mousemove", debounce(onMouseMove, 100));
            window.addEventListener("touchstart", onWindowTouchStart);
            window.addEventListener("touchmove", onWindowTouchMove);
            mainHeader.addEventListener("touchstart", onTouchStart);

            function onScroll(event) {
                const dy = window.scrollY - lastScrollY;

                // move with the page
                currentY -= dy;
                if (currentY > 0) {
                    currentY = 0;
                } else if (currentY < -mainHeader.offsetHeight) {
                    currentY = -mainHeader.offsetHeight;
                }

                currentYTarget = currentY;
                updateDOM();

                lastScrollY = window.scrollY;
            }

            function onMouseMove(event) {
                if (isTouch) return;

                const dy = event.clientY - lastCursorY;

                // show when mouse goes near the top
                const scaledDy = Math.sign(dy) * Math.log1p(Math.abs(dy)) * 20;
                if (dy < 0 && event.clientY + scaledDy < mainHeader.offsetHeight) {
                    currentYTarget = 0;
                    mouseHovering = true;
                } else if (
                    mouseHovering &&
                    dy > 0 &&
                    event.clientY > mainHeader.offsetHeight * 4
                ) {
                    currentYTarget = Math.max(-window.scrollY, -mainHeader.offsetHeight);
                    mouseHovering = false;
                }

                updateDOM();
                lastCursorY = event.clientY;
            }

            function onWindowTouchStart(event) {
                isTouch = true;
                lastCursorY = event.touches[0].clientY;
            }

            function onWindowTouchMove(event) {
                const dy = event.touches[0].clientY - lastCursorY;

                // move with touch but only if at edge
                if (window.scrollY <= 0 && dy > 0) {
                    currentY += dy;
                    if (currentY >= 0) {
                        currentY = 0;
                        document.body.style.overscrollBehaviorY = null;
                    } else if (currentY < 0) {
                        document.body.style.overscrollBehaviorY = "none";
                    }

                    currentYTarget = currentY;
                    updateDOM();
                }

                lastCursorY = event.touches[0].clientY;
            }

            function onTouchStart(event) {
                currentYTarget = 0;
                updateDOM();
                console.log("onTouchStart");
            }

            const updateDOM = debounce(() => {
                mainHeader.style.transform = `translateY(${currentY.toFixed(2)}px)`;

                const isHidden = currentY < -mainHeader.offsetHeight * 0.8;
                mainHeader.classList.toggle("hidden", isHidden);

                if (Math.abs(currentY - currentYTarget) > 1) {
                    currentY += (currentYTarget - currentY) * 0.2;
                    requestAnimationFrame(updateDOM);
                } else {
                    currentY = currentYTarget;
                }
            });

            if (mainHeader.classList.contains("prehide")) {
                document.body.style.overscrollBehaviorY = "none";
                currentY = currentYTarget = -mainHeader.offsetHeight;
                updateDOM();
            }

            function debounce(fn, ms = 0) {
                let recentlyFired = false;
                return (...args) => {
                    if (recentlyFired) return;
                    recentlyFired = true;
                    if (ms === 0) {
                        requestAnimationFrame(() => (recentlyFired = false));
                    } else {
                        setTimeout(() => (recentlyFired = false), ms);
                    }
                    return fn(...args);
                };
            }
        })();
    </script>
    <script>
        (() => {
            const blogMediaElementImages = document.querySelectorAll(
                "img.blog-media-element"
            );

            for (const img of blogMediaElementImages) {
                if (watchImage(img)) {
                    const intervalID = setInterval(() => watchImage(img, intervalID), 200);
                }
                img.addEventListener("load", onLoadImage);
            }

            function watchImage(img, intervalID) {
                if (img.naturalWidth > 0 || img.naturalHeight) {
                    img.style.objectPosition = null;
                    img.removeAttribute("width");
                    img.removeAttribute("height");

                    if (intervalID != undefined) clearInterval(intervalID);
                    return false;
                } else {
                    if (!img.style.objectPosition) {
                        img.style.objectPosition = "100vw";
                    }
                    return true;
                }
            }

            function onLoadImage(event) {
                event.currentTarget.style.background = null;
            }
        })();
    </script>
</body>
</html>