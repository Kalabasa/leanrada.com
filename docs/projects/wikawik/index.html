<html>
<head>
  <title>Wikawik</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/favicon.png">
  <style>
    @font-face {
      font-family: "Space Mono";
      src: url("/fonts/SpaceMono-Regular.ttf") format("truetype");
    }

    @font-face {
      font-family: "Space Mono";
      font-style: italic;
      src: url("/fonts/SpaceMono-Italic.ttf") format("truetype");
    }

    @font-face {
      font-family: "Miriam Libre";
      src: url("/fonts/MiriamLibre-Regular.ttf") format("truetype");
    }

    @font-face {
      font-family: "Miriam Libre";
      font-weight: bold;
      src: url("/fonts/MiriamLibre-Bold.ttf") format("truetype");
    }

    :root {
      --default-font: "Space Mono", monaco, Consolas, Lucida Console, monospace;
      --reading-font: "Miriam Libre", Futura, "Trebuchet MS", Arial, sans-serif;

      --bg-clr: #111;
      --card-clr: #222;
      --clr0-light: #54f8c1;
      --clr0: #0ad591;
      --clr0-dark: #018b5d;
      --clr1: #df2063;

      --ease: cubic-bezier(0.8, 0, 1, 1);
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--default-font, monospace);
      background-color: var(--bg-clr, #111);
      color: #fff;
      overflow-x: hidden;
    }

    a {
      color: var(--clr0-light, #fff);
    }

    a:visited {
      color: var(--clr0, #fff);
    }
  </style>
  <style>
    .home-link {
      text-decoration: none;
    }

    .home-link-icon {
      width: 48px;
      height: 48px;
      image-rendering: pixelated;
    }

    .home-link-icon:hover {
      filter: invert(1);
    }
  </style>
  <style>
    .main-footer {
      display: flex;
      justify-content: space-between;
      gap: 60px;
      padding: 60px calc(max(60px, 50vw - 600px)) 60px;
      font-size: 18px;
      font-weight: bold;
      background: var(--clr0);
      color: #000;
    }

    .main-footer-links-heading {
      margin: 0 0 18px;
      font-size: inherit;
    }

    .main-footer-line {
      margin: 0 0 18px;
    }

    .main-footer-nav,
    .main-footer-nav:visited {
      color: #000;
    }

    .main-footer-nav:hover {
      color: #fff;
    }

    @media (max-width: 700px) {
      .main-footer {
        flex-direction: column-reverse;
      }
    }
  </style>
  <style>
    .main-header {
      position: sticky;
      top: 0;
      width: 100%;
      height: 60px;
      padding: 0 calc(25% - 150px);
      z-index: 100;
      box-sizing: border-box;
    }

    .main-header.float {
      position: fixed;
    }

    .main-header-bar {
      position: relative;
      display: flex;
      justify-content: space-evenly;
      align-items: flex-end;
      height: 100%;
    }

    .main-header-item,
    .main-header-item:visited {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 6ch;
      height: 36px;
      padding: 0 18px;
      border-radius: 18px;
      font-size: 15px;
      font-weight: bold;
      letter-spacing: 1px;
      text-decoration: none;
      text-transform: uppercase;
      color: #fff;
      backdrop-filter: blur(8px);
      background-image: linear-gradient(60deg, #fff2 60%, transparent 60%);
      background-repeat: no-repeat;
      background-size: 220% 100%;
      background-position: 115%;
      transition: background-position 0.2s var(--ease);
    }

    .main-header-item:hover {
      background-image: linear-gradient(60deg,
          #fff2 50%,
          #fff 50%,
          #fff 60%,
          transparent 60%);
      background-position: 0%;
    }

    .main-header-item.select {
      background: #fff2;
    }

    .main-header-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      image-rendering: pixelated;
      filter: invert(1);
      backdrop-filter: blur(8px) invert(1);
    }

    .main-header-indicator {
      position: absolute;
      width: 6px;
      height: 6px;
      left: 50%;
      top: calc(100% + 12px);
      transform: translate(-50%, -50%);
      /* border acts as extended touch area */
      border: solid 6mm transparent;
      border-radius: 50%;
      background: #fff;
      background-clip: padding-box;
      opacity: 0;
      transition: opacity 50ms;
    }

    .main-header.hidden .main-header-indicator {
      opacity: 0.8;
    }
  </style>
  <style>
    .blog-page {
      display: flex;
      justify-content: center;
      overflow: hidden;
    }

    .content {
      padding: 60px 18px;
      width: 100%;
      max-width: 700px;
      font-family: var(--reading-font, sans-serif);
      font-size: 18px;
      line-height: 2.2;
      letter-spacing: 0.02em;
      color: #ddd;
      box-sizing: border-box;
    }

    .markdown h1,
    .markdown h2,
    .markdown h3,
    .markdown h4,
    .markdown h5,
    .markdown h6 {
      font-family: var(--default-font, monospace);
      font-weight: lighter;
      font-style: italic;
      line-height: 1.6;
      letter-spacing: 0.04em;
      margin: 36px 0;
    }

    .markdown h1 {
      text-align: center;
      font-size: 200%;
    }

    .markdown h2 {
      font-size: 150%;
    }

    .markdown h3,
    .markdown h4,
    .markdown h5,
    .markdown h6 {
      font-size: 120%;
    }

    .markdown p {
      margin: 36px 0;
    }

    .markdown hr {
      width: 36px;
      margin: 90px auto;
      border: solid 1.5px #ccc;
      background: #ccc;
      border-radius: 3px;
    }

    .markdown code {
      display: inline-block;
      padding: 0 6px;
      border-radius: 6px;
      font-family: var(--default-font, monospace);
      background: var(--card-clr);
    }

    .markdown pre code {
      display: block;
      padding: 18px;
      border-radius: 18px;
      line-height: 1.6;
      overflow-y: auto;
    }

    .markdown .center {
      text-align: center;
    }

    .markdown .center-flex {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    /* todo: convert to component <caption>, reuse across <blog-media> */
    .markdown .caption {
      display: block;
      font-size: 15px;
    }
  </style>
  <style>
    .project-info-card {
      font-family: var(--default-font);
      font-size: 15px;
      line-height: 1.6;
    }

    .project-info-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .project-info-card-title {
      flex: 0 0 auto;
      align-self: stretch;
      position: relative;
      margin-right: 12px;
      padding: 12px 18px 6px 12px;
      border-radius: 18px 18px 0 0;
      font-style: italic;
      text-decoration: underline;
      background-color: var(--card-clr);
    }

    .project-info-card-title::after {
      content: "";
      position: absolute;
      left: 100%;
      bottom: 0;
      width: 36px;
      height: 18px;
      border-bottom-left-radius: 18px;
      box-shadow: -18px 0 0 var(--card-clr);
    }

    .project-info-card-fields {
      display: grid;
      grid-auto-flow: column;
      grid-template-rows: 1fr 1fr;
      padding: 12px;
      border-radius: 0 18px 18px 18px;
      background-color: var(--card-clr);
    }

    @media (max-width: 600px) {
      .project-info-card-fields {
        display: block;
      }
    }

    .project-info-card-field {
      display: flex;
    }

    .project-info-card-field-label {
      padding: 6px;
      font-style: italic;
    }

    .project-info-card-field-value {
      padding: 6px;
      font-weight: bold;
    }
  </style>
  <style>
    .btn,
    .btn:visited {
      padding: 6px 12px;
      border-radius: 12px;
      border: none;
      font-family: var(--default-font);
      font-size: 12px;
      font-weight: bold;
      text-decoration: none;
      background: var(--clr0);
      color: #fff;
      cursor: pointer;
    }

    .btn:hover {
      background: var(--clr0-light);
    }
  </style>
  <style>
    .blog-media {
      text-align: center;
      /* external margin because it's expected to be in an article */
      margin: 36px 0;
    }

    .blog-media-bleed {
      margin: 90px 0;
      max-height: 80vh;
    }

    .blog-media-element {
      display: inline-block;
      max-width: 100%;
      max-height: 80vh;
      border-radius: 18px;
    }

    .blog-media-bleed .blog-media-element {
      position: relative;
      left: 50%;
      max-width: max(min(100vw, 800px), 80vw);
      transform: translateX(-50%);
    }

    .blog-media-caption {
      display: block;
      font-size: 15px;
    }
  </style>
</head>


<body>

  <header class="main-header">
    <div class="main-header-bar">
      <a href="/" class="main-header-item ">Home</a>
      <img class="main-header-icon" src="/icons/tada.png">
      <a href="/projects/" class="main-header-item ">Works</a>
      <div class="main-header-indicator"></div>
    </div>
  </header>

  <div class="blog-page">
    <div class="content">

      <!-- prettier-ignore -->
      <div class="markdown">
        <h1 id="wikawik">Wikawik</h1>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_0_350.generated.jpg 350w,/projects/wikawik/media/wikawik_0_700.generated.jpg 700w" sizes="(max-width:350px) 350px, 700px" class="blog-media-element" alt="preview" src="/projects/wikawik/media/wikawik_0.jpg" spec="100% [700) 700">
        </div>

        <h2 id="language-map-of-the-philippines">Language map of the Philippines</h2>
        <p>According to the diksiyonaryo: <strong>“wikawik”</strong> is a Filipino word, meaning <em>madaldal</em> or talkative.</p>
        <p><a target="_blank" href="https://kalabasa.github.io/wikawik/">Wikawik</a>, on the other hand, is a webapp that showcases the various languages spoken in the Philippines.</p>
        <aside class="project-info-card">
          <div class="project-info-card-header">
            <div class="project-info-card-title">Project details</div>
            <a target="_blank" class="btn " tag="a" href="https://leanrada.com/wikawik/">
              Open the app
            </a>
          </div>
          <div class="project-info-card-fields">
            <div class="project-info-card-field">
              <div class="project-info-card-field-label">released</div>
              <div class="project-info-card-field-value">2020</div>
            </div>
            <div class="project-info-card-field">
              <div class="project-info-card-field-label">role</div>
              <div class="project-info-card-field-value">creator</div>
            </div>
            <div class="project-info-card-field">
              <div class="project-info-card-field-label">platform</div>
              <div class="project-info-card-field-value">Web</div>
            </div>
            <div class="project-info-card-field">
              <div class="project-info-card-field-label">tech</div>
              <div class="project-info-card-field-value">HTML, JS, D3.js, MobX, GeoJSON</div>
            </div>
          </div>
        </aside>

        <p>There are over 100 languages spoken across the Philippine archipelago.</p>
        <p>It’s amazing how diverse the language landscape of the Philippines is, yet it is rarely treasured or celebrated in the Philippines.</p>
        <p>In my grade school years, we celebrated <a target="_blank" href="https://en.wikipedia.org/wiki/Buwan_ng_Wika"><strong><em>Buwan ng Wika</em></strong></a> (Month of Language) every August, but they never taught us about all the other languages in the Philippines. It was only ever about Tagalog, the official national language and the language of the capital city.</p>
        <p>Now that I’m older, I got a wider understanding of the languages in the Philippines. Linguistics has also become a fascination for me, especially when it relates to Austronesian languages, the larger language family under which Philippine languages are grouped.</p>
        <p><strong>Anyway, I digress. Back to the Wikawik project.</strong></p>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_mob_338.generated.jpg 338w,/projects/wikawik/media/wikawik_mob_675.generated.jpg 675w,/projects/wikawik/media/wikawik_mob_700.generated.jpg 700w" sizes="(max-width:338px) 338px,not (min-width:700px) 675px, 700px" class="blog-media-element" alt="webapp" src="/projects/wikawik/media/wikawik_mob.jpg" spec="100% [700) 700">
        </div>

        <p>This project has been on my list of project ideas for a while now. It was only in 2020 mid-quarantine August that the project gained traction, just in time for <em>Buwan ng Wika</em>.</p>
        <p>The main idea behind the project was that it would be a phrase book in map form. Instead of the usual map visualization with color-coded regions, there would be phrases shown in local tongues spoken throughout the country.</p>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_350.generated.jpg 350w,/projects/wikawik/media/wikawik_700.generated.jpg 700w" sizes="(max-width:350px) 350px, 700px" class="blog-media-element" alt="visualization of phrases" src="/projects/wikawik/media/wikawik.jpg" spec="100% [700) 700">
        </div>

        <p>The phrases would be translations of everyday words and phrases, such as “good morning” and “good evening”.</p>
        <p>I also had an idea of having audio recordings of native speakers saying each of the phrases, because not all languages are pronounced the same. However, it wasn’t really feasible for me to do so.</p>
        <p>Without audio resources, I had to settle on plain text phrases, lacking any pronunciation information.</p>
        <p>The text phrases are displayed via speech bubbles that pop up from the little person markers scattered throughout the map.</p>
        <div class="blog-media blog-media-bleed">
          <img srcset="/projects/wikawik/media/wikawik_1_350.generated.jpg 350w,/projects/wikawik/media/wikawik_1_700.generated.jpg 700w,/projects/wikawik/media/wikawik_1_1050.generated.jpg 1050w,/projects/wikawik/media/wikawik_1_1400.generated.jpg 1400w" sizes="(max-width:350px) 350px,(max-width:700px) 700px,(max-width:1050px) 1050px, 1400px" class="blog-media-element" alt="distribution of markers" src="/projects/wikawik/media/wikawik_1.jpg" spec="100% [1400) 1400">
        </div>

        <p>The distribution of these markers are based on actual language distribution as per census data.</p>
        <p>Clicking on a marker will conjure an information panel containing details about the selected language.</p>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_2_350.generated.jpg 350w,/projects/wikawik/media/wikawik_2_700.generated.jpg 700w" sizes="(max-width:350px) 350px, 700px" class="blog-media-element" alt="information panel shown" src="/projects/wikawik/media/wikawik_2.jpg" spec="100% [700) 700">
        </div>

        <p>The information panel contains statistics about the language and the locality in which the selected language is spoken.</p>
        <p>It also contains info scraped from <strong>Wikipedia</strong> and the <strong>Atlas Filipinas</strong> from the <strong>Komisyon sa Wikang Filipino (KWF)</strong>.</p>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_4_350.generated.jpg 350w,/projects/wikawik/media/wikawik_4_700.generated.jpg 700w" sizes="(max-width:350px) 350px, 700px" class="blog-media-element" alt="language information section in the panel" src="/projects/wikawik/media/wikawik_4.jpg" spec="100% [700) 700">
        </div>

        <p>Language endangerment data was obtained from the KWF Atlas as well, though I doubt the accuracy and up-to-dateness of some entries.</p>
        <p>My favorite part was the <em>Related Media</em> section that features some pieces of music and videos sung or spoken in the local language.</p>
        <div class="blog-media blog-media-default">
          <img srcset="/projects/wikawik/media/wikawik_3_350.generated.jpg 350w,/projects/wikawik/media/wikawik_3_700.generated.jpg 700w" sizes="(max-width:350px) 350px, 700px" class="blog-media-element" alt="media section shown" src="/projects/wikawik/media/wikawik_3.jpg" spec="100% [700) 700">
        </div>

        <p>I curated these media by hand and I really enjoyed discovering all these music sung in different Philippine languages.</p>
        <hr>
        <p>The visualization was implemented using <strong>D3.js</strong>. I also used the <strong>MobX</strong> library to coordinate the whole app. Some smaller geo manipulation utilities helped along too.</p>
        <p>Everything was written in vanilla JS. In hindsight I should’ve used some UI framework and a compiler, because the main script reached about 2000 lines! This has been a great reminder of the state of the vanilla web; without Webpack and without Typescript.</p>
        <div class="blog-media blog-media-default">
          <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Test animation">
            <source src="/projects/wikawik/media/wikawik_test.mp4">
            <a href="/projects/wikawik/media/wikawik_test.mp4">Test animation</a>
          </video><span class="blog-media-caption">Early test of marker entrance animation</span>
        </div>

        <p>The research needed for the app was probably the most time-consuming thing I did for this project. For comparison, I finished implementing the main visualization interface in one week. The data cleanup and research took about a month.</p>
        <p>The data was primarily based on the <strong>Philippine Statistics Authority’s 2010 Census</strong>. The census surveyed, among other things, the main languages spoken at home in sampled households across the country.</p>
        <p>But it got a little messy. There were inconsistencies throughout the data. Even the PSA and the KWF don’t agree on which are dialects and which are languages.</p>
        <p>For example, look into Thinking Machine’s story about <a target="_blank" href="https://stories.thinkingmachin.es/philippine-languages/"><strong>The language landscape of the Philippines</strong></a>. That visualization was based on raw PSA data.</p>
        <p>One example issue with raw PSA data is, you won’t find the <a target="_blank" href="https://en.wikipedia.org/wiki/Rinconada_Bikol_language">Rinconada language</a> in there. PSA classified this language and other Bicol languages as one “Bikol/Bicol”. On the contrary, KWF classifies these non-mutually-intelligible languages separately.</p>
        <p>There were many such cases of mismatch and misrepresentation in PSA data, which is sad.</p>
        <p>That’s why a combination of other sources were used to supplement or correct this data, like the KWF Atlas, Ethnologue, Glottolog, and more.</p>
        <div class="blog-media blog-media-default">
          <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Preloader animation">
            <source src="/projects/wikawik/media/wikawik_preloader.mp4">
            <a href="/projects/wikawik/media/wikawik_preloader.mp4">Preloader animation</a>
          </video><span class="blog-media-caption">The app loader is an animation of the logo morphing between the letters wi and ka in stylized Baybayin.</span>
        </div>

        <p>Related to that were the translated phrases themselves. The phrases were the hardest to research!</p>
        <p>Usually, meta information about a small language are readily available on the Internet, but what I needed were the words themselves - vocabularies, or phrase books. These resources are often non-existent, especially for dying languages that only had a handful of native speakers left.</p>
        <p>I ended up going through Internet listicles, language tutorials, random chatter in public Facebook groups of tribespeople, sparse bilingual dictionaries, and translated Bibles made by missionaries to the Philippines.</p>
        <p>I know it's not rigorous research, so I wrote a bunch of disclaimers on the About page.</p>
        <p>In the end, I got up to 82 translations. And that is for a single phrase only – the default “good morning”. For other phrases, such as “good evening”, not so much. I put up some forms for user submitted translations, but no one has ever submitted anything yet.</p>
        <div class="blog-media blog-media-default">
          <video class="blog-media-element" muted="" autoplay="" loop="" aria-label="Video of a version of the intro animation">
            <source src="/projects/wikawik/media/wikawik_intro.mp4">
            <a href="/projects/wikawik/media/wikawik_intro.mp4">Video of a version of the intro animation</a>
          </video>
        </div>

        <p>It was a fun and educational project. It made me appreciate the Philippine languages more and discover a glimpse of the cultures around the Philippines!</p>
        <p>Here’s a link to the <a target="_blank" href="https://kalabasa.github.io/wikawik/">webapp</a>. Salamat sa pagbisita!
        </p>

      </div>

    </div>
  </div>

  <footer class="main-footer">
    <div>
      <p class="main-footer-line">
        <a target="_self" class="main-footer-nav" href="/">Home</a> ·
        <a target="_self" class="main-footer-nav" href="/projects/">Works</a>
      </p>
      <p class="main-footer-line">(C) 2023 Lean Rada</p>
    </div>
    <div>
      <h2 class="main-footer-links-heading">On the web</h2>
      <a target="_blank" class="home-link" href="https://www.linkedin.com/in/leanrada/">
        <img class="home-link-icon" src="/icons/linkedin.png">
      </a>
      <a target="_blank" class="home-link" href="https://codepen.io/kalabasa">
        <img class="home-link-icon" src="/icons/codepen.png">
      </a>
      <a target="_blank" class="home-link" href="https://stackoverflow.com/users/3144156/kalabasa">
        <img class="home-link-icon" src="/icons/stackoverflow.png">
      </a>
      <a target="_blank" class="home-link" href="https://github.com/Kalabasa">
        <img class="home-link-icon" src="/icons/github.png">
      </a>
    </div>
  </footer>
  <script>
    (() => {
      const mainHeader = document.querySelector(".main-header");

      let currentY = 0;
      let currentYTarget = 0;

      let mouseHovering = false;

      let lastScrollY = window.scrollY;
      let lastMouseY = 0;
      window.addEventListener("scroll", debounce(onScroll));
      window.addEventListener("mousemove", debounce(onMouseMove, 100));
      mainHeader.addEventListener("touchstart", onTouchStart);

      function onScroll(event) {
        const dy = window.scrollY - lastScrollY;

        // move with the page
        currentY -= dy;
        if (currentY > 0) {
          currentY = 0;
        } else if (currentY < -mainHeader.offsetHeight) {
          currentY = -mainHeader.offsetHeight;
        }

        currentYTarget = currentY;
        updateDOM();

        lastScrollY = window.scrollY;
      }

      function onMouseMove(event) {
        const dy = event.clientY - lastMouseY;

        // show when mouse goes near the top
        const scaledDy = Math.sign(dy) * Math.log1p(Math.abs(dy)) * 20;
        if (dy < 0 && event.clientY + scaledDy < mainHeader.offsetHeight) {
          currentYTarget = 0;
          mouseHovering = true;
        } else if (
          mouseHovering &&
          dy > 0 &&
          event.clientY > mainHeader.offsetHeight * 4
        ) {
          currentYTarget = Math.max(-window.scrollY, -mainHeader.offsetHeight);
          mouseHovering = false;
        }

        updateDOM();
        lastMouseY = event.clientY;
      }

      function onTouchStart(event) {
        currentYTarget = 0;
        updateDOM();
      }

      const updateDOM = debounce(() => {
        mainHeader.style.transform = `translateY(${currentY.toFixed(2)}px)`;

        const isHidden = currentY < -mainHeader.offsetHeight * 0.8;
        mainHeader.classList.toggle("hidden", isHidden);

        if (Math.abs(currentY - currentYTarget) > 1) {
          currentY += (currentYTarget - currentY) * 0.2;
          requestAnimationFrame(updateDOM);
        } else {
          currentY = currentYTarget;
        }
      });

      if (mainHeader.classList.contains("prehide")) {
        currentY = currentYTarget = -mainHeader.offsetHeight;
        updateDOM();
      }

      function debounce(fn, ms = 0) {
        let recentlyFired = false;
        return (...args) => {
          if (recentlyFired) return;
          recentlyFired = true;
          if (ms === 0) {
            requestAnimationFrame(() => (recentlyFired = false));
          } else {
            setTimeout(() => (recentlyFired = false), ms);
          }
          return fn(...args);
        };
      }
    })();
  </script>
</body>
</html>